import{r as l,t as na,c as oa,j as e,S as K,a as Y,R as Je,O as je,P as Ke,C as ye,b as Ye,X as we,T as ve,D as Ne,d as ia,e as la,f as Ze,g as da,h as ca,i as ua,k as ma,l as xa,m as fa,n as pa,o as U,L as ge,p as te,q as Se,U as Me,B as Oe,s as ce,u as ue,M as ae,v as Qe,G as es,w as ha,x as ba,N as ga,y as ja,z as ya,A as wa,E as va,F as Na,Z as Sa,H as ka,I as Ra,J as Ca,K as ss,Q as as,V as ts,W as rs,Y as ns,_ as os,$ as ke,a0 as _a,a1 as is,a2 as ls,a3 as Aa,a4 as re,a5 as C,a6 as Ea,a7 as Da,a8 as ds,a9 as Ma,aa as Oa,ab as Ta,ac as Ia,ad as Pa,ae as cs,af as $a,ag as us,ah as ms,ai as xs,aj as fs,ak as ps,al as za,am as Fa,an as Ue,ao as Ba,ap as La,aq as Wa,ar as Ua,as as Ga,at as Ha,au as Va,av as qa,aw as Xa,ax as Ja,ay as Ka,az as Ya,aA as Za,aB as hs,aC as Qa,aD as bs,aE as et,aF as gs,aG as js,aH as st,aI as ys,aJ as at,aK as ws,aL as tt,aM as vs,aN as Ns,aO as rt,aP as nt,aQ as Ss,aR as ot,aS as it,aT as ks,aU as Rs,aV as lt,aW as dt,aX as Cs,aY as ct,aZ as ut,a_ as mt,a$ as xt,b0 as ft,b1 as M,b2 as pt,b3 as ht,b4 as bt,b5 as gt}from"./vendor.js";const De=768;function jt(){const[s,a]=l.useState(void 0);return l.useEffect(()=>{const t=window.matchMedia(`(max-width: ${De-1}px)`),r=()=>{a(window.innerWidth<De)};return t.addEventListener("change",r),a(window.innerWidth<De),()=>t.removeEventListener("change",r)},[]),!!s}function u(...s){return na(oa(s))}const Te=Y("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),E=l.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...o},c)=>{const i=r?K:"button";return e.jsx(i,{className:u(Te({variant:a,size:t,className:s})),ref:c,...o})});E.displayName="Button";const z=l.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));z.displayName="Input";const Ie=l.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...r},o)=>e.jsx(Je,{ref:o,decorative:t,orientation:a,className:u("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));Ie.displayName=Je.displayName;const yt=ia,wt=Ke,_s=l.forwardRef(({className:s,...a},t)=>e.jsx(je,{className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));_s.displayName=je.displayName;const vt=Y("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),As=l.forwardRef(({side:s="right",className:a,children:t,...r},o)=>e.jsxs(wt,{children:[e.jsx(_s,{}),e.jsxs(ye,{ref:o,className:u(vt({side:s}),a),...r,children:[e.jsxs(Ye,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),t]})]}));As.displayName=ye.displayName;const Es=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",s),...a});Es.displayName="SheetHeader";const Ds=l.forwardRef(({className:s,...a},t)=>e.jsx(ve,{ref:t,className:u("text-lg font-semibold text-foreground",s),...a}));Ds.displayName=ve.displayName;const Ms=l.forwardRef(({className:s,...a},t)=>e.jsx(Ne,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));Ms.displayName=Ne.displayName;function Ge({className:s,...a}){return e.jsx("div",{className:u("animate-pulse rounded-md bg-primary/10",s),...a})}const Pe=da,ne=ca,oe=ua,J=l.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(la,{children:e.jsx(Ze,{ref:r,sideOffset:a,className:u("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...t})}));J.displayName=Ze.displayName;const Nt="sidebar_state",St=60*60*24*7,kt="16rem",Rt="18rem",Ct="3rem",_t="b",Os=l.createContext(null);function Re(){const s=l.useContext(Os);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const Ts=l.forwardRef(({defaultOpen:s=!0,open:a,onOpenChange:t,className:r,style:o,children:c,...i},n)=>{const d=jt(),[m,f]=l.useState(!1),[b,g]=l.useState(s),j=a??b,y=l.useCallback(x=>{const h=typeof x=="function"?x(j):x;t?t(h):g(h),document.cookie=`${Nt}=${h}; path=/; max-age=${St}`},[t,j]),v=l.useCallback(()=>d?f(x=>!x):y(x=>!x),[d,y,f]);l.useEffect(()=>{const x=h=>{h.key===_t&&(h.metaKey||h.ctrlKey)&&(h.preventDefault(),v())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[v]);const R=j?"expanded":"collapsed",p=l.useMemo(()=>({state:R,open:j,setOpen:y,isMobile:d,openMobile:m,setOpenMobile:f,toggleSidebar:v}),[R,j,y,d,m,f,v]);return e.jsx(Os.Provider,{value:p,children:e.jsx(Pe,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":kt,"--sidebar-width-icon":Ct,...o},className:u("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:n,...i,children:c})})})});Ts.displayName="SidebarProvider";const me=l.forwardRef(({side:s="left",variant:a="sidebar",collapsible:t="offcanvas",className:r,children:o,...c},i)=>{const{isMobile:n,state:d,openMobile:m,setOpenMobile:f}=Re();return t==="none"?e.jsx("div",{className:u("flex h-[90%] w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...c,children:o}):n?e.jsx(yt,{open:m,onOpenChange:f,...c,children:e.jsxs(As,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Rt},side:s,children:[e.jsxs(Es,{className:"sr-only",children:[e.jsx(Ds,{children:"Sidebar"}),e.jsx(Ms,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-[90%] w-full flex-col",children:o})]})}):e.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?t:"","data-variant":a,"data-side":s,children:[e.jsx("div",{className:u("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:u("fixed inset-y-10 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...c,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-[90%] w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});me.displayName="Sidebar";const At=l.forwardRef(({className:s,onClick:a,...t},r)=>{const{toggleSidebar:o}=Re();return e.jsxs(E,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:u("h-7 w-7",s),onClick:c=>{a==null||a(c),o()},...t,children:[e.jsx(ma,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});At.displayName="SidebarTrigger";const Is=l.forwardRef(({className:s,...a},t)=>{const{toggleSidebar:r}=Re();return e.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:u("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...a})});Is.displayName="SidebarRail";const Et=l.forwardRef(({className:s,...a},t)=>e.jsx("main",{ref:t,className:u("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...a}));Et.displayName="SidebarInset";const Dt=l.forwardRef(({className:s,...a},t)=>e.jsx(z,{ref:t,"data-sidebar":"input",className:u("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...a}));Dt.displayName="SidebarInput";const xe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"header",className:u("flex flex-col gap-2 p-2",s),...a}));xe.displayName="SidebarHeader";const Mt=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"footer",className:u("flex flex-col gap-2 p-2",s),...a}));Mt.displayName="SidebarFooter";const Ot=l.forwardRef(({className:s,...a},t)=>e.jsx(Ie,{ref:t,"data-sidebar":"separator",className:u("mx-2 w-auto bg-sidebar-border",s),...a}));Ot.displayName="SidebarSeparator";const fe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"content",className:u("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...a}));fe.displayName="SidebarContent";const pe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group",className:u("relative flex w-full min-w-0 flex-col p-2",s),...a}));pe.displayName="SidebarGroup";const he=l.forwardRef(({className:s,asChild:a=!1,...t},r)=>{const o=a?K:"div";return e.jsx(o,{ref:r,"data-sidebar":"group-label",className:u("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...t})});he.displayName="SidebarGroupLabel";const Tt=l.forwardRef(({className:s,asChild:a=!1,...t},r)=>{const o=a?K:"button";return e.jsx(o,{ref:r,"data-sidebar":"group-action",className:u("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...t})});Tt.displayName="SidebarGroupAction";const be=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group-content",className:u("w-full text-sm",s),...a}));be.displayName="SidebarGroupContent";const B=l.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu",className:u("flex w-full min-w-0 flex-col gap-1",s),...a}));B.displayName="SidebarMenu";const L=l.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,"data-sidebar":"menu-item",className:u("group/menu-item relative",s),...a}));L.displayName="SidebarMenuItem";const It=Y("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),W=l.forwardRef(({asChild:s=!1,isActive:a=!1,variant:t="default",size:r="default",tooltip:o,className:c,...i},n)=>{const d=s?K:"button",{isMobile:m,state:f}=Re(),b=e.jsx(d,{ref:n,"data-sidebar":"menu-button","data-size":r,"data-active":a,className:u(It({variant:t,size:r}),c),...i});return o?(typeof o=="string"&&(o={children:o}),e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:b}),e.jsx(J,{side:"right",align:"center",hidden:f!=="collapsed"||m,...o})]})):b});W.displayName="SidebarMenuButton";const Pt=l.forwardRef(({className:s,asChild:a=!1,showOnHover:t=!1,...r},o)=>{const c=a?K:"button";return e.jsx(c,{ref:o,"data-sidebar":"menu-action",className:u("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...r})});Pt.displayName="SidebarMenuAction";const $t=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:u("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...a}));$t.displayName="SidebarMenuBadge";const zt=l.forwardRef(({className:s,showIcon:a=!1,...t},r)=>{const o=l.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:u("flex h-8 items-center gap-2 rounded-md px-2",s),...t,children:[a&&e.jsx(Ge,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(Ge,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});zt.displayName="SidebarMenuSkeleton";const Ps=l.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:u("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...a}));Ps.displayName="SidebarMenuSub";const $s=l.forwardRef(({...s},a)=>e.jsx("li",{ref:a,...s}));$s.displayName="SidebarMenuSubItem";const zs=l.forwardRef(({asChild:s=!1,size:a="md",isActive:t,className:r,...o},c)=>{const i=s?K:"a";return e.jsx(i,{ref:c,"data-sidebar":"menu-sub-button","data-size":a,"data-active":t,className:u("flex h-10 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});zs.displayName="SidebarMenuSubButton";const Ft=xa,Bt=fa,Lt=pa,Wt=Y("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),I=l.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:u(Wt({variant:a}),s),...t}));I.displayName="Alert";const Ut=l.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:u("mb-1 font-medium leading-none tracking-tight",s),...a}));Ut.displayName="AlertTitle";const P=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("text-sm [&_p]:leading-relaxed",s),...a}));P.displayName="AlertDescription";function Gt(){const[s,a]=l.useState(null),[t,r]=l.useState(!0),[o,c]=l.useState(null);return l.useEffect(()=>{(async()=>{try{r(!0),c(null);const n=window.WP_SMS_DATA;if(!n)throw new Error("WP_SMS_DATA not available");const d=await fetch(`${n.restUrl}settings/schema/list`,{headers:{"X-WP-Nonce":n.nonce,"Content-Type":"application/json"}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=await d.json();if(!m.success)throw new Error(m.message||"Failed to fetch schema");a(m.data)}catch(n){c(n instanceof Error?n.message:"An error occurred"),console.error("Failed to fetch schema:",n)}finally{r(!1)}})()},[]),{data:s,loading:t,error:o}}const Ht={contact_forms:ae,community_membership:ue,ecommerce:ce,learning_events:es,booking_appointments:Qe,support:Oe,jobs:Me,contact_form_7:ae,gravityforms:ae,quform:ae,buddypress:ue,ultimate_member:ue,woocommerce:ce,edd:ce,awesome_support:Oe,job_manager:Me},Vt={Settings:U,Cog:Ca,MessageSquare:Ra,Send:ka,Zap:Sa,Star:Na,Bell:Oe,Mail:ae,Users:Me,MousePointer:va,MessageCircle:wa,Shield:ya,Lock:Se,ShoppingCart:ce,UserCheck:ue,GraduationCap:es,Calendar:Qe,BarChart3:ja,Newspaper:ga,BadgeCheck:ba},He=(s,a="size-4")=>{const t=Vt[s]||U;return e.jsx(t,{className:a})};function qt({onGroupSelect:s,selectedGroup:a,...t}){const{data:r,loading:o,error:c}=Gt(),i=n=>{s&&s(n)};return o?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Loading..."})]})]})})})}),e.jsx(fe,{children:e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(ge,{className:"h-6 w-6 animate-spin"})})})]}):c?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Error"})]})]})})})}),e.jsx(fe,{children:e.jsxs(I,{variant:"destructive",className:"m-4",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsxs(P,{children:["Failed to load menu: ",c]})]})})]}):r?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Admin Panel"})]})]})})})}),e.jsxs(fe,{children:[r.core&&Object.keys(r.core).length>0&&e.jsxs(pe,{children:[e.jsx(he,{children:"Core Settings"}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.core).map(([n,d])=>e.jsx(L,{children:e.jsx(W,{asChild:!0,tooltip:d.label,onClick:()=>i(n),className:a===n?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[He(d.icon||"Settings"),e.jsx("span",{children:d.label})]})})},n))})})]}),r.addons&&Object.keys(r.addons).length>0&&e.jsxs(pe,{children:[e.jsx(he,{children:"Addons"}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.addons).map(([n,d])=>e.jsx(L,{children:e.jsx(W,{asChild:!0,tooltip:`${d.label} (Pro)`,onClick:()=>i(n),className:a===n?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[He(d.icon||"Shield"),e.jsx("span",{children:d.label}),e.jsx(Se,{className:"size-3 text-orange-500 ml-auto"})]})})},n))})})]}),r.integrations&&r.integrations.children&&e.jsxs(pe,{children:[e.jsx(he,{children:r.integrations.label}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.integrations.children).map(([n,d])=>{const m=Ht[n]||U;return"children"in d&&d.children?e.jsx(Ft,{className:"group/collapsible",children:e.jsxs(L,{children:[e.jsx(Bt,{asChild:!0,children:e.jsxs(W,{tooltip:d.label,className:"flex items-center gap-2",children:[e.jsx(m,{className:"size-4"}),e.jsx("span",{children:d.label}),e.jsx(ha,{className:"ml-auto size-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(Lt,{children:e.jsx(Ps,{children:Object.entries(d.children).map(([f,b])=>"name"in b?e.jsx($s,{children:e.jsx(zs,{asChild:!0,onClick:()=>i(b.name),className:a===b.name?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsx("button",{className:"w-full text-left",children:b.label})})},f):null)})})]})},n):null})})})]})]}),e.jsx(Is,{})]}):null}const $=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",s),...a}));$.displayName="Card";const ie=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",s),...a}));ie.displayName="CardHeader";const Ce=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("font-semibold leading-none tracking-tight",s),...a}));Ce.displayName="CardTitle";const _e=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("text-sm text-muted-foreground",s),...a}));_e.displayName="CardDescription";const G=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("p-6 pt-0",s),...a}));G.displayName="CardContent";const Xt=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("flex items-center p-6 pt-0",s),...a}));Xt.displayName="CardFooter";const Jt=Y("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _({className:s,variant:a,...t}){return e.jsx("div",{className:u(Jt({variant:a}),s),...t})}const Kt={new:{label:"New",color:"bg-green-100 text-green-800",icon:os},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:ns},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:rs},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:ts},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:as},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:ss}};function Yt({section:s,children:a}){const t=s.tag?Kt[s.tag]:null,r=t==null?void 0:t.icon,o=()=>{switch(s.layout){case"2-column":return"grid grid-cols-1 md:grid-cols-2 gap-6";case"3-column":return"grid grid-cols-1 md:grid-cols-3 gap-6";default:return"space-y-6"}};return e.jsxs($,{className:`mb-6 ${s.readonly?"opacity-60 pointer-events-none":""}`,children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ce,{className:"text-xl",children:s.title}),s.readonly&&e.jsx(_,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Read Only"}),t&&e.jsxs(_,{variant:"secondary",className:t.color,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})]}),s.subtitle&&e.jsx(_e,{className:"text-base",children:s.subtitle})]}),s.helpUrl&&!s.readonly&&e.jsx(E,{variant:"ghost",size:"sm",asChild:!0,className:"flex-shrink-0",children:e.jsxs("a",{href:s.helpUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Help"}),e.jsx(_a,{className:"w-3 h-3"})]})})]})}),e.jsx(G,{children:e.jsx("div",{className:o(),children:a})})]})}const Zt=Y("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=l.forwardRef(({className:s,...a},t)=>e.jsx(is,{ref:t,className:u(Zt(),s),...a}));O.displayName=is.displayName;function F({content:s,className:a}){return s?e.jsx("div",{className:u("text-sm text-muted-foreground [&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",a),dangerouslySetInnerHTML:{__html:s}}):null}const Qt={new:{label:"New",color:"bg-green-100 text-green-800",icon:os},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:ns},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:rs},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:ts},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:as},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:ss}};function Z({tag:s,className:a=""}){const t=Qt[s];if(!t)return null;const r=t.icon;return e.jsxs(_,{variant:"secondary",className:`${t.color} ${a}`,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})}function Ve({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Z,{tag:d})]}),e.jsx(z,{id:o,value:a||"",onChange:m=>t(m.target.value),disabled:n,placeholder:s.placeholder}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const $e=l.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:u("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a}));$e.displayName="Textarea";function er({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,rows:m}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Z,{tag:d})]}),e.jsx($e,{id:o,value:a||"",onChange:f=>t(f.target.value),disabled:n,rows:m,placeholder:s.placeholder}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function sr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,min:m,max:f,step:b}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Z,{tag:d})]}),e.jsx(z,{id:o,type:"number",value:a||"",onChange:g=>t(g.target.value),placeholder:s.placeholder,min:m,max:f,step:b,disabled:n}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const Fs=l.forwardRef(({className:s,...a},t)=>e.jsx(ls,{ref:t,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(Aa,{className:u("flex items-center justify-center text-current"),children:e.jsx(re,{className:"h-4 w-4"})})}));Fs.displayName=ls.displayName;function ar({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`flex items-center space-x-2 ${n?"opacity-50":""}`,children:[e.jsx(Fs,{id:o,checked:a||!1,onCheckedChange:m=>t(m),disabled:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Z,{tag:d})]}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const tr=Ke,Bs=l.forwardRef(({className:s,...a},t)=>e.jsx(je,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Bs.displayName=je.displayName;const rr=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(tr,{children:[e.jsx(Bs,{}),e.jsxs(ye,{ref:r,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(Ye,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rr.displayName=ye.displayName;const nr=l.forwardRef(({className:s,...a},t)=>e.jsx(ve,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",s),...a}));nr.displayName=ve.displayName;const or=l.forwardRef(({className:s,...a},t)=>e.jsx(Ne,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));or.displayName=Ne.displayName;const ze=l.forwardRef(({className:s,...a},t)=>e.jsx(C,{ref:t,className:u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...a}));ze.displayName=C.displayName;const Fe=l.forwardRef(({className:s,...a},t)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Ea,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(C.Input,{ref:t,className:u("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...a})]}));Fe.displayName=C.Input.displayName;const Be=l.forwardRef(({className:s,...a},t)=>e.jsx(C.List,{ref:t,className:u("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...a}));Be.displayName=C.List.displayName;const Le=l.forwardRef((s,a)=>e.jsx(C.Empty,{ref:a,className:"py-6 text-center text-sm",...s}));Le.displayName=C.Empty.displayName;const H=l.forwardRef(({className:s,...a},t)=>e.jsx(C.Group,{ref:t,className:u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...a}));H.displayName=C.Group.displayName;const ir=l.forwardRef(({className:s,...a},t)=>e.jsx(C.Separator,{ref:t,className:u("-mx-1 h-px bg-border",s),...a}));ir.displayName=C.Separator.displayName;const V=l.forwardRef(({className:s,...a},t)=>e.jsx(C.Item,{ref:t,className:u("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...a}));V.displayName=C.Item.displayName;const Ls=Ma,Ws=Oa,We=l.forwardRef(({className:s,align:a="center",sideOffset:t=4,...r},o)=>e.jsx(Da,{children:e.jsx(ds,{ref:o,align:a,sideOffset:t,className:u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));We.displayName=ds.displayName;function lr({options:s,value:a,onValueChange:t,placeholder:r="Select an option...",searchPlaceholder:o="Search options...",emptyText:c="No options found.",className:i}){const[n,d]=l.useState(!1),m=!Array.isArray(s)&&Object.values(s).some(g=>typeof g=="object"),b=(()=>{if(!a)return"";if(Array.isArray(s)){const g=s.find(j=>j.value===a||Object.keys(j)[0]===a);return g?g.label||Object.values(g)[0]:""}if(m){for(const[g,j]of Object.entries(s))if(typeof j=="object"){for(const[y,v]of Object.entries(j))if(y===a)return v}}else return s[a]||"";return""})();return e.jsxs(Ls,{open:n,onOpenChange:d,children:[e.jsx(Ws,{asChild:!0,children:e.jsxs(E,{variant:"outline",role:"combobox","aria-expanded":n,className:u("w-full justify-between",i),children:[b||r,e.jsx(Ta,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(We,{className:"w-full p-0",align:"start",children:e.jsxs(ze,{children:[e.jsx(Fe,{placeholder:o}),e.jsxs(Be,{children:[e.jsx(Le,{children:c}),m?Object.entries(s).map(([g,j])=>typeof j=="object"?e.jsx(H,{heading:g,children:Object.entries(j).map(([y,v])=>e.jsxs(V,{value:y,onSelect:R=>{t(R===a?"":R),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===y?"opacity-100":"opacity-0")}),v]},y))},g):null):Array.isArray(s)?e.jsx(H,{children:s.map(g=>{const j=g.value||Object.keys(g)[0],y=g.label||Object.values(g)[0];return e.jsxs(V,{value:j,onSelect:v=>{t(v===a?"":v),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===j?"opacity-100":"opacity-0")}),y]},j)})}):e.jsx(H,{children:Object.entries(s).map(([g,j])=>e.jsxs(V,{value:g,onSelect:y=>{t(y===a?"":y),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===g?"opacity-100":"opacity-0")}),j]},g))})]})]})})]})}function dr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Z,{tag:d})]}),e.jsx(lr,{options:s.options,value:a||"",onValueChange:t,placeholder:"Select an option",searchPlaceholder:"Search options...",disabled:n}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function cr({item:s,onRemove:a,onMoveUp:t,onMoveDown:r,canMoveUp:o,canMoveDown:c}){return e.jsxs(_,{variant:"secondary",className:"mr-1 mb-1 flex items-center gap-1",children:[o&&e.jsx("button",{type:"button",className:"p-0.5 hover:bg-muted rounded",onClick:t,"aria-label":"Move up",children:e.jsx(Ia,{className:"h-3 w-3"})}),c&&e.jsx("button",{type:"button",className:"p-0.5 hover:bg-muted rounded",onClick:r,"aria-label":"Move down",children:e.jsx(Pa,{className:"h-3 w-3"})}),e.jsx("span",{className:"flex-1",children:s.label}),e.jsx("button",{type:"button",className:"ml-1 p-0.5 hover:bg-muted rounded",onClick:()=>a(s.value),"aria-label":"Remove",children:e.jsx(we,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]})}function ur({item:s,onRemove:a}){return e.jsxs(_,{variant:"secondary",className:"mr-1 mb-1 flex items-center",children:[s.label,e.jsx("button",{type:"button",className:"ml-1 p-0.5 hover:bg-muted rounded",onClick:()=>a(s.value),"aria-label":"Remove",children:e.jsx(we,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]})}function mr({options:s,value:a=[],onValueChange:t,placeholder:r="Select options...",searchPlaceholder:o="Search options...",emptyText:c="No options found.",className:i,sortable:n=!1}){const[d,m]=l.useState(!1),f=!Array.isArray(s)&&Object.values(s).some(p=>typeof p=="object"),b=p=>{if(Array.isArray(s)){const x=s.find(h=>h.value===p||Object.keys(h)[0]===p);return x?x.label||Object.values(x)[0]:p}if(f){for(const[x,h]of Object.entries(s))if(typeof h=="object"){for(const[S,T]of Object.entries(h))if(S===p)return typeof T=="string"?T:p}}else{const x=s[p];return typeof x=="string"?x:p}return p},g=p=>{const x=a.includes(p)?a.filter(h=>h!==p):[...a,p];t(x)},j=p=>{t(a.filter(x=>x!==p))},y=p=>{if(p>0){const x=[...a],h=x[p];x[p]=x[p-1],x[p-1]=h,t(x)}},v=p=>{if(p<a.length-1){const x=[...a],h=x[p];x[p]=x[p+1],x[p+1]=h,t(x)}},R=a.map(p=>({value:p,label:b(p)}));return e.jsx("div",{className:u("w-full",i),children:e.jsxs(Ls,{open:d,onOpenChange:m,children:[e.jsx(Ws,{asChild:!0,children:e.jsx(E,{variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between h-auto min-h-9 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1 flex-1",children:R.length>0?n?R.map((p,x)=>e.jsx(cr,{item:p,onRemove:j,onMoveUp:()=>y(x),onMoveDown:()=>v(x),canMoveUp:x>0,canMoveDown:x<R.length-1},p.value)):R.map((p,x)=>e.jsx(ur,{item:p,onRemove:j},p.value)):e.jsx("span",{className:"text-muted-foreground",children:r})})})}),e.jsx(We,{className:"w-full p-0",align:"start",children:e.jsxs(ze,{children:[e.jsx(Fe,{placeholder:o}),e.jsxs(Be,{children:[e.jsx(Le,{children:c}),f?Object.entries(s).map(([p,x])=>typeof x=="object"?e.jsx(H,{heading:p,children:Object.entries(x).map(([h,S])=>e.jsxs(V,{onSelect:()=>g(h),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(h)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(h)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof S=="string"?S:h]},h))},p):null):Array.isArray(s)?e.jsx(H,{children:s.map(p=>{const x=p.value||Object.keys(p)[0],h=p.label||Object.values(p)[0];return e.jsxs(V,{onSelect:()=>g(x),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(x)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(x)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof h=="string"?h:x]},x)})}):e.jsx(H,{children:Object.entries(s).map(([p,x])=>e.jsxs(V,{onSelect:()=>g(p),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(p)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(p)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof x=="string"?x:p]},p))})]})]})})]})})}function xr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,sortable:m}=s;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,children:c}),d&&e.jsx(Z,{tag:d})]}),e.jsx(mr,{options:s.options,value:Array.isArray(a)?a:[],onValueChange:t,placeholder:"Select options",searchPlaceholder:"Search options...",sortable:m,disabled:n}),i&&e.jsx(F,{content:i}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function fr({field:s}){const{label:a,description:t}=s;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ie,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:a}),t&&e.jsx(F,{content:t})]})}function pr({field:s}){const{label:a,description:t}=s;return e.jsxs(I,{className:"border-blue-200 bg-blue-50 text-blue-800",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsxs(P,{className:"text-blue-800",children:[e.jsx("div",{className:"font-medium",children:a}),t&&e.jsx("div",{className:"mt-1 text-sm",dangerouslySetInnerHTML:{__html:t}})]})]})}function hr({field:s,value:a}){const{key:t,label:r,description:o,tag:c}=s;return e.jsxs("div",{className:"space-y-2",children:[r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r}),c&&e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:c})]}),e.jsx("div",{className:"[&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",dangerouslySetInnerHTML:{__html:a||""}}),o&&e.jsx(F,{content:o})]})}const br=za,gr=$a,Us=l.forwardRef(({className:s,...a},t)=>e.jsx(cs,{className:u("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Us.displayName=cs.displayName;const Gs=l.forwardRef(({className:s,...a},t)=>e.jsxs(gr,{children:[e.jsx(Us,{}),e.jsx(us,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));Gs.displayName=us.displayName;const Hs=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",s),...a});Hs.displayName="AlertDialogHeader";const Vs=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Vs.displayName="AlertDialogFooter";const qs=l.forwardRef(({className:s,...a},t)=>e.jsx(ms,{ref:t,className:u("text-lg font-semibold",s),...a}));qs.displayName=ms.displayName;const Xs=l.forwardRef(({className:s,...a},t)=>e.jsx(xs,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));Xs.displayName=xs.displayName;const Js=l.forwardRef(({className:s,...a},t)=>e.jsx(fs,{ref:t,className:u(Te(),s),...a}));Js.displayName=fs.displayName;const Ks=l.forwardRef(({className:s,...a},t)=>e.jsx(ps,{ref:t,className:u(Te({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Ks.displayName=ps.displayName;function jr({id:s,index:a,isLocked:t,canRemove:r,onRemove:o,children:c}){const[i,n]=l.useState(!1),{attributes:d,listeners:m,setNodeRef:f,transform:b,transition:g,isDragging:j}=Ja({id:s,disabled:t}),y={transform:Ka.Transform.toString(b),transition:g},v=()=>{o(),n(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs($,{ref:f,style:y,className:`relative transition-all duration-200 ${j?"opacity-50 scale-105 shadow-lg z-50":""} ${t?"cursor-not-allowed":""}`,children:[e.jsx(ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{...d,...m,className:`flex items-center justify-center w-6 h-6 rounded ${t?"cursor-not-allowed opacity-50":"cursor-grab active:cursor-grabbing hover:bg-muted"}`,"aria-label":"Drag to reorder",children:e.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("span",{className:"text-sm font-medium",children:["Item ",a+1]})]}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",disabled:!r||t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:()=>n(!0),children:e.jsx(Za,{className:"h-4 w-4"})})]})}),e.jsx(G,{className:"pt-0",children:c})]}),e.jsx(br,{open:i,onOpenChange:n,children:e.jsxs(Gs,{children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:"Delete Item"}),e.jsxs(Xs,{children:["Are you sure you want to delete Item ",a+1,"? This action cannot be undone."]})]}),e.jsxs(Vs,{children:[e.jsx(Ks,{children:"Cancel"}),e.jsx(Js,{onClick:v,children:"Delete"})]})]})})]})}function yr({label:s,description:a,tooltip:t,isPro:r=!1,isLocked:o=!1,minItems:c=0,maxItems:i=10,addButtonText:n="Add Item",children:d,value:m=[{}],onChange:f}){const[b,g]=l.useState(()=>m.map((x,h)=>({...x,id:x.id||`item-${Date.now()}-${h}`})));l.useEffect(()=>{g(m.map((x,h)=>({...x,id:x.id||`item-${Date.now()}-${h}`})))},[m]);const j=Fa(Ue(Xa,{activationConstraint:{distance:8}}),Ue(qa,{coordinateGetter:Va})),y=()=>{if(b.length<i){const x={id:`item-${Date.now()}`},h=[...b,x];g(h),f==null||f(h)}},v=x=>{if(b.length>c){const h=b.filter((S,T)=>T!==x);g(h),f==null||f(h)}},R=(x,h)=>{const S=[...b];S[x]={...S[x],...h},g(S),f==null||f(S)},p=x=>{const{active:h,over:S}=x;if(h.id!==(S==null?void 0:S.id)){const T=b.findIndex(q=>q.id===h.id),Ae=b.findIndex(q=>q.id===(S==null?void 0:S.id)),de=Ha(b,T,Ae);g(de),f==null||f(de)}};return e.jsx(Pe,{children:e.jsxs("div",{className:`space-y-4 ${o?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"text-sm font-medium leading-none",children:s}),t&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(ke,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(J,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(_,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(J,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),a&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a}),e.jsx("div",{className:`space-y-3 ${o?"pointer-events-none":""}`,children:e.jsx(Ba,{sensors:j,collisionDetection:La,onDragEnd:p,children:e.jsx(Wa,{items:b.map(x=>x.id),strategy:Ua,children:b.map((x,h)=>e.jsx(jr,{id:x.id,index:h,isLocked:o,canRemove:b.length>c,onRemove:()=>v(h),children:d(h,S=>R(h,S),()=>v(h))},x.id))})})}),e.jsxs(E,{type:"button",variant:"outline",onClick:y,disabled:b.length>=i||o,className:"w-full",children:[e.jsx(Ga,{className:"mr-2 h-4 w-4"}),n]}),b.length>=i&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum ",i," items allowed"]})]})})}function wr(s){const[a,t]=l.useState([]),[r,o]=l.useState(!1),[c,i]=l.useState(null);return l.useEffect(()=>{(async()=>{if(!s||s==="default"){t([]);return}try{o(!0),i(null);const d=window.WP_SMS_DATA;if(!d)throw new Error("WP_SMS_DATA not available");const m=await fetch(`${d.restUrl}gateways/fields/${s}`,{headers:{"X-WP-Nonce":d.nonce,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const f=await m.json();if(!f.success)throw new Error(f.message||"Failed to fetch gateway fields");t(f.data)}catch(d){i(d instanceof Error?d.message:"An error occurred"),console.error("Failed to fetch gateway fields:",d)}finally{o(!1)}})()},[s]),{data:a,loading:r,error:c}}function le({label:s,description:a,tooltip:t,isPro:r=!1,isRequired:o=!1,isLocked:c=!1,children:i,htmlFor:n}){return e.jsx(Pe,{children:e.jsxs("div",{className:`space-y-2 ${c?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{htmlFor:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${c?"text-muted-foreground":""}`,children:[s,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),t&&!c&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(ke,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(J,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&!c&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(_,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(J,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),e.jsx("div",{className:c?"pointer-events-none":"",children:i}),a&&e.jsx("p",{className:`text-sm leading-relaxed ${c?"text-muted-foreground opacity-70":"text-muted-foreground"}`,children:a})]})})}const vr=l.forwardRef(({className:s,...a},t)=>e.jsx(hs,{className:u("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:e.jsx(Qa,{className:u("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));vr.displayName=hs.displayName;const Nr=ot,Sr=it,Ys=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(bs,{ref:r,className:u("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(et,{asChild:!0,children:e.jsx(gs,{className:"h-4 w-4 opacity-50"})})]}));Ys.displayName=bs.displayName;const Zs=l.forwardRef(({className:s,...a},t)=>e.jsx(js,{ref:t,className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(st,{className:"h-4 w-4"})}));Zs.displayName=js.displayName;const Qs=l.forwardRef(({className:s,...a},t)=>e.jsx(ys,{ref:t,className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(gs,{className:"h-4 w-4"})}));Qs.displayName=ys.displayName;const ea=l.forwardRef(({className:s,children:a,position:t="popper",...r},o)=>e.jsx(at,{children:e.jsxs(ws,{ref:o,className:u("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(Zs,{}),e.jsx(tt,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Qs,{})]})}));ea.displayName=ws.displayName;const kr=l.forwardRef(({className:s,...a},t)=>e.jsx(vs,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",s),...a}));kr.displayName=vs.displayName;const sa=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ns,{ref:r,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(rt,{children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsx(nt,{children:a})]}));sa.displayName=Ns.displayName;const Rr=l.forwardRef(({className:s,...a},t)=>e.jsx(Ss,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",s),...a}));Rr.displayName=Ss.displayName;const Cr=l.forwardRef(({className:s,...a},t)=>e.jsx(ks,{className:u("grid gap-2",s),...a,ref:t}));Cr.displayName=ks.displayName;const _r=l.forwardRef(({className:s,...a},t)=>e.jsx(Rs,{ref:t,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(lt,{className:"flex items-center justify-center",children:e.jsx(dt,{className:"h-3.5 w-3.5 fill-primary"})})}));_r.displayName=Rs.displayName;const Ar=l.forwardRef(({className:s,...a},t)=>e.jsxs(Cs,{ref:t,className:u("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(ct,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(ut,{className:"absolute h-full bg-primary"})}),e.jsx(mt,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ar.displayName=Cs.displayName;function Er({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,onChange:d}){return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsx(z,{value:a,placeholder:t,onChange:m=>d==null?void 0:d(m.target.value),disabled:n,className:"w-full"})})}function Dr({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,onChange:d}){const[m,f]=l.useState(!1);return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{type:m?"text":"password",value:a,placeholder:t,onChange:b=>d==null?void 0:d(b.target.value),disabled:n,className:"w-full pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!m),disabled:n,children:m?e.jsx(xt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"})})]})})}function Mr({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,rows:d=3,onChange:m}){return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsx($e,{value:a,placeholder:t,rows:d,onChange:f=>m==null?void 0:m(f.target.value),disabled:n,className:"w-full resize-none"})})}function Or({label:s,value:a,placeholder:t,options:r,description:o,tooltip:c,isPro:i,isRequired:n,isLocked:d,onChange:m}){return e.jsx(le,{label:s,description:o,tooltip:c,isPro:i,isRequired:n,isLocked:d,children:e.jsxs(Nr,{value:a,onValueChange:m,disabled:d,children:[e.jsx(Ys,{className:"w-full",children:e.jsx(Sr,{placeholder:t})}),e.jsx(ea,{children:r.map(f=>e.jsx(sa,{value:f.value,children:f.label},f.value))})]})})}function Tr({label:s,value:a="#ff6b35",description:t,tooltip:r,isPro:o,isLocked:c,onChange:i}){return e.jsx(le,{label:s,description:t,tooltip:r,isPro:o,isLocked:c,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{type:"color",value:a,onChange:n=>i==null?void 0:i(n.target.value),disabled:c,className:"w-12 h-10 p-1 border rounded cursor-pointer"}),e.jsx(z,{type:"text",value:a,onChange:n=>i==null?void 0:i(n.target.value),disabled:c,className:"flex-1",placeholder:"#ff6b35"})]})})}function Ir({gatewayName:s,formData:a,onFieldChange:t}){const{data:r,loading:o,error:c}=wr(s);return M.useEffect(()=>{r&&r.length>0&&r.forEach(i=>{i.id in a||t(i.id,"")})},[r,a,t]),o?e.jsx($,{children:e.jsxs(G,{className:"flex items-center justify-center py-8",children:[e.jsx(ge,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading gateway fields..."})]})}):c?e.jsx($,{children:e.jsx(G,{className:"py-4",children:e.jsx(I,{variant:"destructive",children:e.jsxs(P,{children:["Failed to load gateway fields: ",c]})})})}):!r||r.length===0?null:e.jsxs($,{children:[e.jsxs(ie,{children:[e.jsx(Ce,{children:"Gateway Configuration"}),e.jsx(_e,{children:"Configure the specific settings for your selected gateway."})]}),e.jsx(G,{className:"space-y-6",children:(r||[]).map(i=>{const n=a[i.id]||"";switch(i.type){case"select":return e.jsx(Or,{label:i.name,value:n,description:i.desc,options:i.options?Object.entries(i.options).map(([d,m])=>({value:d,label:m})):[],onChange:d=>t(i.id,d)},i.id);case"textarea":return e.jsx(Mr,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id);case"password":return e.jsx(Dr,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id);default:return e.jsx(Er,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id)}})})]})}function Pr(s,a){if(s.showIf){for(const[t,r]of Object.entries(s.showIf))if(a[t]!==r)return!1}if(s.hideIf){for(const[t,r]of Object.entries(s.hideIf))if(a[t]===r)return!1}return!0}function aa(s,a){if(!s.options_depends_on)return s.options;const t=s.options_depends_on,r=a[t];if(!r||r.length===0)return s.options;if(Array.isArray(s.options))return s.options.filter(c=>r.includes(c.value??Object.keys(c)[0]));const o={};return Object.entries(s.options).forEach(([c,i])=>{r.includes(c)&&(o[c]=i)}),o}function $r(){const s=t=>{if(typeof window<"u"&&window.wp&&window.wp.media)try{const r=window.wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1});r.on("select",()=>{const o=r.state().get("selection").first().toJSON();t(o.url)}),r.open()}catch(r){console.error("Error opening WordPress media uploader:",r),a(t)}else console.warn("WordPress media uploader not available, using fallback"),a(t)},a=t=>{const r=document.createElement("input");r.type="file",r.accept="image/*",r.style.display="none",r.onchange=o=>{var i;const c=(i=o.target.files)==null?void 0:i[0];if(c){const n=URL.createObjectURL(c);t(n),setTimeout(()=>URL.revokeObjectURL(n),1e3)}document.body.contains(r)&&document.body.removeChild(r)},document.body.appendChild(r),r.click()};return{openMediaUploader:s}}function zr({field:s,value:a,onChange:t,error:r}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:s.key,children:s.label}),e.jsx(pt,{country:"us",value:a||"",onChange:t,inputProps:{name:s.key,id:s.key,className:"w-full"},enableSearch:!0,enableAreaCodes:!0,enableAreaCodeStretch:!0,disableDropdown:!1,countryCodeEditable:!0,buttonStyle:{}}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function ta({field:s,value:a,onChange:t,error:r,formData:o}){const{type:c}=s,n=(f=>f.options_depends_on?{...f,options:aa(f,o)}:f)(s),{openMediaUploader:d}=$r();function m({field:f,value:b,onChange:g}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:f.label}),b&&e.jsx("img",{src:b,alt:"Preview",className:"mb-2 rounded border max-h-32"}),e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-1.5 border rounded bg-muted hover:bg-accent text-sm",onClick:()=>d(g),children:b?"Change Image":"Select Image"}),f.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:f.description})]})}switch(c){case"text":return e.jsx(Ve,{field:n,value:a,onChange:t,error:r});case"textarea":return e.jsx(er,{field:n,value:a,onChange:t,error:r});case"number":return e.jsx(sr,{field:n,value:a,onChange:t,error:r});case"checkbox":return e.jsx(ar,{field:n,value:a,onChange:t,error:r});case"select":case"advancedselect":case"countryselect":return e.jsx(dr,{field:n,value:a,onChange:t,error:r});case"multiselect":case"advancedmultiselect":return e.jsx(xr,{field:n,value:a,onChange:t,error:r});case"repeater":return e.jsx(yr,{label:n.label,description:n.description,value:a||[],onChange:t,children:(f,b,g)=>{const j=(a||[])[f]||{};return e.jsx("div",{className:"space-y-4",children:(n.fieldGroups||[]).map(y=>e.jsxs("div",{className:"space-y-4",children:[y.label&&e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:y.label}),y.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:y.description}),e.jsx("div",{className:`grid gap-4 ${y.layout==="2-column"?"grid-cols-1 md:grid-cols-2":y.layout==="3-column"?"grid-cols-1 md:grid-cols-3":"grid-cols-1"}`,children:(y.fields||[]).map(v=>{`${n.key}${f}${v.key}`;const R=j[v.key]||"";return e.jsx("div",{className:"space-y-2",children:e.jsx(ta,{field:v,value:R,onChange:p=>{b({[v.key]:p})},error:void 0,formData:o||{}})},v.key)})})]},y.key))})}});case"color":return e.jsx(Tr,{label:n.label,value:a,onChange:t,description:n.description});case"tel":return e.jsx(zr,{field:n,value:a,onChange:t,error:r});case"gateway":return e.jsx(Ir,{field:n,value:a,onChange:t,error:r});case"header":return e.jsx(fr,{field:n,value:a,onChange:t,error:r});case"notice":return e.jsx(pr,{field:n,value:a,onChange:t,error:r});case"html":return e.jsx(hr,{field:n,value:a,onChange:t,error:r});case"image":return e.jsx(m,{field:n,value:a,onChange:t});default:return console.warn(`Unknown field type: ${c}`),e.jsx(Ve,{field:n,value:a,onChange:t,error:r})}}function Fr(s){const a=l.useRef(null),t=l.useRef(null);s!==a.current&&(a.current=s,t.current=s);const r=l.useCallback((n,d)=>{t.current&&(t.current={...t.current,[n]:d})},[]),o=l.useCallback(()=>{if(!a.current||!t.current)return{};const n={};return Object.keys(t.current).forEach(d=>{const m=a.current[d],f=t.current[d];Array.isArray(f)&&Array.isArray(m)?JSON.stringify(f)!==JSON.stringify(m)&&(n[d]=f):f!==m&&(n[d]=f)}),n},[]),c=l.useCallback(()=>Object.keys(o()).length>0,[o]),i=l.useCallback(()=>{t.current=a.current},[]);return{updateValue:r,getChangedFields:o,hasChanges:c,resetChanges:i}}class ra extends Error{constructor(a,t){super(a),this.fields=t,this.name="ValidationError"}}class Br{async saveSettings(a){try{const t=window.WP_SMS_DATA,r=`${t.restUrl}settings/save`;console.log("Saving settings to:",r);const o=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},body:JSON.stringify(a)}),c=await o.json();if(!o.ok)if(o.status===422){const i=c;throw new ra(i.message,i.data.fields)}else{const i=c;throw new Error(i.message||"Failed to save settings")}return c}catch(t){throw t instanceof Error?t:new Error("Network error occurred while saving settings")}}}const qe=new Br;function Lr({schema:s,savedValues:a,loading:t,error:r,onSaveSuccess:o,onSchemaRefresh:c}){var q;const[i,n]=M.useState({}),[d,m]=M.useState(!1),[f,b]=M.useState(null),[g,j]=M.useState({}),[y,v]=M.useState(!1),{updateValue:R,getChangedFields:p,hasChanges:x,resetChanges:h}=Fr(a);M.useEffect(()=>{if(s){const w={};s.sections.forEach(N=>{N.fields.forEach(k=>{if(a&&a.hasOwnProperty(k.key))w[k.key]=a[k.key];else if(k.default!==void 0)w[k.key]=k.default;else switch(k.type){case"checkbox":w[k.key]=!1;break;case"multiselect":case"advancedmultiselect":w[k.key]=[];break;default:w[k.key]=""}})}),n(w),h()}},[s,a,h]);const S=(w,N)=>{n(D=>({...D,[w]:N})),R(w,N);const k=s==null?void 0:s.sections.flatMap(D=>D.fields).find(D=>D.key===w);k!=null&&k.auto_save_and_refresh&&T(w,N),s&&s.sections.flatMap(A=>A.fields).filter(A=>A.options_depends_on===w).forEach(A=>{const Q=i[A.key];if(Q&&Array.isArray(Q)){const Ee=aa(A,{...i,[w]:N});let ee;if(Array.isArray(Ee)){const se=Ee.map(X=>X.value||Object.keys(X)[0]);ee=Q.filter(X=>se.includes(X))}else{const se=Object.keys(Ee);ee=Q.filter(X=>se.includes(X))}ee.length!==Q.length&&(n(se=>({...se,[A.key]:ee})),R(A.key,ee))}}),g[w]&&j(D=>{const A={...D};return delete A[w],A})},T=async(w,N)=>{try{m(!0),b(null),(await qe.saveSettings({[w]:N})).success?(v(!0),h(),c==null||c(),setTimeout(()=>v(!1),3e3)):b("Failed to save field and refresh schema")}catch(k){b(k instanceof Error?k.message:"An unexpected error occurred")}finally{m(!1)}},Ae=async()=>{if(s){m(!0),b(null),j({});try{const w=p(),N=Object.keys(w);if(N.length===0){m(!1);return}(await qe.saveSettings(w)).success?(v(!0),n(D=>({...D,...w})),h(),o==null||o(N),setTimeout(()=>v(!1),3e3)):b("Failed to save settings")}catch(w){w instanceof ra?(j(w.fields),b("Please fix the validation errors below")):b(w instanceof Error?w.message:"An unexpected error occurred")}finally{m(!1)}}},de=()=>{a&&(n(a),h()),j({}),v(!1)};return M.useEffect(()=>{y&&window.scrollTo({top:0,behavior:"smooth"})},[y]),M.useEffect(()=>{const w=N=>{if(x())return N.preventDefault(),N.returnValue="",""};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[i,g]),t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ge,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading settings..."})]}):r?e.jsxs(I,{variant:"destructive",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:r})]}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-primary/10 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:(()=>{const w=ht[s.icon]||U;return e.jsx(w,{})})()})}),e.jsxs("div",{children:[e.jsx(Ce,{className:"text-xl",children:s.label}),e.jsx(_e,{children:"Configure your settings and preferences"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.sections.some(w=>w.helpUrl)&&e.jsx(E,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:(q=s.sections.find(w=>w.helpUrl))==null?void 0:q.helpUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Help"]})})})]})})}),y&&e.jsxs(I,{className:"border-green-200 bg-green-50",children:[e.jsx(bt,{className:"h-4 w-4 text-green-600"}),e.jsx(P,{className:"text-green-800",children:"Settings saved successfully!"})]}),f&&e.jsxs(I,{variant:"destructive",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:f})]}),e.jsx("div",{className:"space-y-6",children:(s.sections||[]).map(w=>e.jsx(Yt,{section:w,children:e.jsx("div",{className:"space-y-6",children:(w.fields||[]).filter(N=>Pr(N,i)).map(N=>e.jsx(ta,{field:N,value:i[N.key],onChange:k=>S(N.key,k),error:g[N.key],formData:i},N.key))})},w.id))}),e.jsx($,{children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{onClick:Ae,disabled:d||!x(),className:"min-w-[100px]",children:d?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"}),e.jsx(E,{variant:"outline",onClick:de,disabled:d||!x(),children:"Reset"})]}),x()&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"})]})})})]}):e.jsxs(I,{children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:"No settings schema available."})]})}function Wr(s){const[a,t]=l.useState(null),[r,o]=l.useState(!1),[c,i]=l.useState(null),n=async()=>{if(!s){t(null);return}try{o(!0),i(null);const m=window.WP_SMS_DATA;if(!m)throw new Error("WP_SMS_DATA not available");const f=await fetch(`${m.restUrl}settings/schema/group/${s}`,{headers:{"X-WP-Nonce":m.nonce,"Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const b=await f.json();if(!b.success)throw new Error(b.message||"Failed to fetch group schema");t(b.data)}catch(m){i(m instanceof Error?m.message:"An error occurred"),console.error("Failed to fetch group schema:",m)}finally{o(!1)}};return l.useEffect(()=>{n()},[s]),{data:a,loading:r,error:c,refresh:()=>{n()}}}function Ur(s){const[a,t]=l.useState(null),[r,o]=l.useState(!1),[c,i]=l.useState(null);return l.useEffect(()=>{(async()=>{if(!s){t(null);return}try{o(!0),i(null);const d=window.WP_SMS_DATA;if(!d)throw new Error("WP_SMS_DATA not available");const m=await fetch(`${d.restUrl}settings/values/group/${s}`,{headers:{"X-WP-Nonce":d.nonce,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const f=await m.json();if(!f.success)throw new Error(f.message||"Failed to fetch group values");t(f.data)}catch(d){i(d instanceof Error?d.message:"An error occurred"),console.error("Failed to fetch group values:",d)}finally{o(!1)}})()},[s]),{data:a,loading:r,error:c}}function Gr(){const s=()=>new URLSearchParams(window.location.search).get("group")||"general",[a,t]=l.useState(s),{data:r,loading:o,error:c,refresh:i}=Wr(a),{data:n,loading:d,error:m}=Ur(a),f=j=>{t(j);const y=new URL(window.location.href);y.searchParams.set("group",j),window.history.pushState({},"",y.toString())};l.useEffect(()=>{const j=()=>{const y=s();t(y)};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[]);const b=o||d,g=c||m;return e.jsx(Ts,{children:e.jsxs("div",{className:"flex w-full min-h-[600px]",children:[e.jsx(qt,{onGroupSelect:f,selectedGroup:a}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your SMS plugin configuration and preferences."})]}),e.jsx(Lr,{schema:r,savedValues:n,loading:b,error:g,onSchemaRefresh:i})]})})]})})}const Xe=document.getElementById("wp-sms-settings-root");Xe?gt.createRoot(Xe).render(e.jsx(Gr,{})):(console.error("WP SMS Settings: Missing #wp-sms-settings-root element in DOM."),console.log("WP SMS Settings: Available elements with similar IDs:",Array.from(document.querySelectorAll('[id*="wp-sms"]')).map(s=>s.id)));
