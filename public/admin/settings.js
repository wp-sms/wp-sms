import{r as l,t as oa,c as ia,j as e,S as J,a as K,R as Ke,O as je,P as Ye,C as ye,b as Ze,X as we,T as ve,D as Ne,d as la,e as da,f as Qe,g as ca,h as ua,i as ma,k as xa,l as fa,m as pa,n as ha,o as U,L as ge,p as te,q as Se,U as Me,B as Oe,s as ce,u as ue,M as ae,v as es,G as ss,w as ba,x as ga,N as ja,y as ya,z as wa,A as va,E as Na,F as Sa,Z as ka,H as Ca,I as Ra,J as _a,K as as,Q as ts,V as rs,W as ns,Y as os,_ as is,$ as ke,a0 as Aa,a1 as ls,a2 as ds,a3 as Ea,a4 as re,a5 as R,a6 as Da,a7 as Ma,a8 as cs,a9 as Oa,aa as Ta,ab as Ia,ac as Pa,ad as $a,ae as us,af as za,ag as ms,ah as xs,ai as fs,aj as ps,ak as hs,al as Fa,am as Ba,an as Ge,ao as La,ap as Wa,aq as Ua,ar as Ga,as as Ha,at as Va,au as qa,av as Xa,aw as Ja,ax as Ka,ay as Ya,az as Za,aA as Qa,aB as bs,aC as et,aD as gs,aE as st,aF as js,aG as ys,aH as at,aI as ws,aJ as tt,aK as vs,aL as rt,aM as Ns,aN as Ss,aO as nt,aP as ot,aQ as ks,aR as it,aS as lt,aT as Cs,aU as Rs,aV as dt,aW as ct,aX as _s,aY as ut,aZ as mt,a_ as xt,a$ as ft,b0 as pt,b1 as M,b2 as ht,b3 as bt,b4 as gt,b5 as jt}from"./vendor.js";const De=768;function yt(){const[s,a]=l.useState(void 0);return l.useEffect(()=>{const t=window.matchMedia(`(max-width: ${De-1}px)`),r=()=>{a(window.innerWidth<De)};return t.addEventListener("change",r),a(window.innerWidth<De),()=>t.removeEventListener("change",r)},[]),!!s}function u(...s){return oa(ia(s))}const Te=K("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),E=l.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...o},c)=>{const i=r?J:"button";return e.jsx(i,{className:u(Te({variant:a,size:t,className:s})),ref:c,...o})});E.displayName="Button";const z=l.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));z.displayName="Input";const Ie=l.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...r},o)=>e.jsx(Ke,{ref:o,decorative:t,orientation:a,className:u("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));Ie.displayName=Ke.displayName;const wt=la,vt=Ye,As=l.forwardRef(({className:s,...a},t)=>e.jsx(je,{className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));As.displayName=je.displayName;const Nt=K("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Es=l.forwardRef(({side:s="right",className:a,children:t,...r},o)=>e.jsxs(vt,{children:[e.jsx(As,{}),e.jsxs(ye,{ref:o,className:u(Nt({side:s}),a),...r,children:[e.jsxs(Ze,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),t]})]}));Es.displayName=ye.displayName;const Ds=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",s),...a});Ds.displayName="SheetHeader";const Ms=l.forwardRef(({className:s,...a},t)=>e.jsx(ve,{ref:t,className:u("text-lg font-semibold text-foreground",s),...a}));Ms.displayName=ve.displayName;const Os=l.forwardRef(({className:s,...a},t)=>e.jsx(Ne,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));Os.displayName=Ne.displayName;function He({className:s,...a}){return e.jsx("div",{className:u("animate-pulse rounded-md bg-primary/10",s),...a})}const Pe=ca,ne=ua,oe=ma,X=l.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(da,{children:e.jsx(Qe,{ref:r,sideOffset:a,className:u("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...t})}));X.displayName=Qe.displayName;const St="sidebar_state",kt=60*60*24*7,Ct="16rem",Rt="18rem",_t="3rem",At="b",Ts=l.createContext(null);function Ce(){const s=l.useContext(Ts);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const Is=l.forwardRef(({defaultOpen:s=!0,open:a,onOpenChange:t,className:r,style:o,children:c,...i},n)=>{const d=yt(),[m,x]=l.useState(!1),[b,g]=l.useState(s),w=a??b,j=l.useCallback(f=>{const h=typeof f=="function"?f(w):f;t?t(h):g(h),document.cookie=`${St}=${h}; path=/; max-age=${kt}`},[t,w]),v=l.useCallback(()=>d?x(f=>!f):j(f=>!f),[d,j,x]);l.useEffect(()=>{const f=h=>{h.key===At&&(h.metaKey||h.ctrlKey)&&(h.preventDefault(),v())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[v]);const C=w?"expanded":"collapsed",p=l.useMemo(()=>({state:C,open:w,setOpen:j,isMobile:d,openMobile:m,setOpenMobile:x,toggleSidebar:v}),[C,w,j,d,m,x,v]);return e.jsx(Ts.Provider,{value:p,children:e.jsx(Pe,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":Ct,"--sidebar-width-icon":_t,...o},className:u("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:n,...i,children:c})})})});Is.displayName="SidebarProvider";const me=l.forwardRef(({side:s="left",variant:a="sidebar",collapsible:t="offcanvas",className:r,children:o,...c},i)=>{const{isMobile:n,state:d,openMobile:m,setOpenMobile:x}=Ce();return t==="none"?e.jsx("div",{className:u("flex h-[90%] w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...c,children:o}):n?e.jsx(wt,{open:m,onOpenChange:x,...c,children:e.jsxs(Es,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Rt},side:s,children:[e.jsxs(Ds,{className:"sr-only",children:[e.jsx(Ms,{children:"Sidebar"}),e.jsx(Os,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-[90%] w-full flex-col",children:o})]})}):e.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?t:"","data-variant":a,"data-side":s,children:[e.jsx("div",{className:u("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:u("fixed inset-y-10 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...c,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-[90%] w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});me.displayName="Sidebar";const Et=l.forwardRef(({className:s,onClick:a,...t},r)=>{const{toggleSidebar:o}=Ce();return e.jsxs(E,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:u("h-7 w-7",s),onClick:c=>{a==null||a(c),o()},...t,children:[e.jsx(xa,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Et.displayName="SidebarTrigger";const Ps=l.forwardRef(({className:s,...a},t)=>{const{toggleSidebar:r}=Ce();return e.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:u("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...a})});Ps.displayName="SidebarRail";const Dt=l.forwardRef(({className:s,...a},t)=>e.jsx("main",{ref:t,className:u("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...a}));Dt.displayName="SidebarInset";const Mt=l.forwardRef(({className:s,...a},t)=>e.jsx(z,{ref:t,"data-sidebar":"input",className:u("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...a}));Mt.displayName="SidebarInput";const xe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"header",className:u("flex flex-col gap-2 p-2",s),...a}));xe.displayName="SidebarHeader";const Ot=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"footer",className:u("flex flex-col gap-2 p-2",s),...a}));Ot.displayName="SidebarFooter";const Tt=l.forwardRef(({className:s,...a},t)=>e.jsx(Ie,{ref:t,"data-sidebar":"separator",className:u("mx-2 w-auto bg-sidebar-border",s),...a}));Tt.displayName="SidebarSeparator";const fe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"content",className:u("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...a}));fe.displayName="SidebarContent";const pe=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group",className:u("relative flex w-full min-w-0 flex-col p-2",s),...a}));pe.displayName="SidebarGroup";const he=l.forwardRef(({className:s,asChild:a=!1,...t},r)=>{const o=a?J:"div";return e.jsx(o,{ref:r,"data-sidebar":"group-label",className:u("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...t})});he.displayName="SidebarGroupLabel";const It=l.forwardRef(({className:s,asChild:a=!1,...t},r)=>{const o=a?J:"button";return e.jsx(o,{ref:r,"data-sidebar":"group-action",className:u("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...t})});It.displayName="SidebarGroupAction";const be=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group-content",className:u("w-full text-sm",s),...a}));be.displayName="SidebarGroupContent";const B=l.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu",className:u("flex w-full min-w-0 flex-col gap-1",s),...a}));B.displayName="SidebarMenu";const L=l.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,"data-sidebar":"menu-item",className:u("group/menu-item relative",s),...a}));L.displayName="SidebarMenuItem";const Pt=K("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),W=l.forwardRef(({asChild:s=!1,isActive:a=!1,variant:t="default",size:r="default",tooltip:o,className:c,...i},n)=>{const d=s?J:"button",{isMobile:m,state:x}=Ce(),b=e.jsx(d,{ref:n,"data-sidebar":"menu-button","data-size":r,"data-active":a,className:u(Pt({variant:t,size:r}),c),...i});return o?(typeof o=="string"&&(o={children:o}),e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:b}),e.jsx(X,{side:"right",align:"center",hidden:x!=="collapsed"||m,...o})]})):b});W.displayName="SidebarMenuButton";const $t=l.forwardRef(({className:s,asChild:a=!1,showOnHover:t=!1,...r},o)=>{const c=a?J:"button";return e.jsx(c,{ref:o,"data-sidebar":"menu-action",className:u("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...r})});$t.displayName="SidebarMenuAction";const zt=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:u("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...a}));zt.displayName="SidebarMenuBadge";const Ft=l.forwardRef(({className:s,showIcon:a=!1,...t},r)=>{const o=l.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:u("flex h-8 items-center gap-2 rounded-md px-2",s),...t,children:[a&&e.jsx(He,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(He,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});Ft.displayName="SidebarMenuSkeleton";const $s=l.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:u("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...a}));$s.displayName="SidebarMenuSub";const zs=l.forwardRef(({...s},a)=>e.jsx("li",{ref:a,...s}));zs.displayName="SidebarMenuSubItem";const Fs=l.forwardRef(({asChild:s=!1,size:a="md",isActive:t,className:r,...o},c)=>{const i=s?J:"a";return e.jsx(i,{ref:c,"data-sidebar":"menu-sub-button","data-size":a,"data-active":t,className:u("flex h-10 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});Fs.displayName="SidebarMenuSubButton";const Bt=fa,Lt=pa,Wt=ha,Ut=K("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),I=l.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:u(Ut({variant:a}),s),...t}));I.displayName="Alert";const Gt=l.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:u("mb-1 font-medium leading-none tracking-tight",s),...a}));Gt.displayName="AlertTitle";const P=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("text-sm [&_p]:leading-relaxed",s),...a}));P.displayName="AlertDescription";function Ht(){const[s,a]=l.useState(null),[t,r]=l.useState(!0),[o,c]=l.useState(null);return l.useEffect(()=>{(async()=>{try{r(!0),c(null);const n=window.WP_SMS_DATA;if(!n)throw new Error("WP_SMS_DATA not available");const d=await fetch(`${n.restUrl}settings/schema/list`,{headers:{"X-WP-Nonce":n.nonce,"Content-Type":"application/json"}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=await d.json();if(!m.success)throw new Error(m.message||"Failed to fetch schema");a(m.data)}catch(n){c(n instanceof Error?n.message:"An error occurred"),console.error("Failed to fetch schema:",n)}finally{r(!1)}})()},[]),{data:s,loading:t,error:o}}const Vt={contact_forms:ae,community_membership:ue,ecommerce:ce,learning_events:ss,booking_appointments:es,support:Oe,jobs:Me,contact_form_7:ae,gravityforms:ae,quform:ae,buddypress:ue,ultimate_member:ue,woocommerce:ce,edd:ce,awesome_support:Oe,job_manager:Me},qt={Settings:U,Cog:_a,MessageSquare:Ra,Send:Ca,Zap:ka,Star:Sa,Bell:Oe,Mail:ae,Users:Me,MousePointer:Na,MessageCircle:va,Shield:wa,Lock:Se,ShoppingCart:ce,UserCheck:ue,GraduationCap:ss,Calendar:es,BarChart3:ya,Newspaper:ja,BadgeCheck:ga},Ve=(s,a="size-4")=>{const t=qt[s]||U;return e.jsx(t,{className:a})};function Xt({onGroupSelect:s,selectedGroup:a,...t}){const{data:r,loading:o,error:c}=Ht(),i=n=>{s&&s(n)};return o?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Loading..."})]})]})})})}),e.jsx(fe,{children:e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(ge,{className:"h-6 w-6 animate-spin"})})})]}):c?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Error"})]})]})})})}),e.jsx(fe,{children:e.jsxs(I,{variant:"destructive",className:"m-4",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsxs(P,{children:["Failed to load menu: ",c]})]})})]}):r?e.jsxs(me,{collapsible:"icon",...t,children:[e.jsx(xe,{children:e.jsx(B,{children:e.jsx(L,{children:e.jsxs(W,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(U,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Admin Panel"})]})]})})})}),e.jsxs(fe,{children:[r.core&&Object.keys(r.core).length>0&&e.jsxs(pe,{children:[e.jsx(he,{children:"Core Settings"}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.core).map(([n,d])=>e.jsx(L,{children:e.jsx(W,{asChild:!0,tooltip:d.label,onClick:()=>i(n),className:a===n?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[Ve(d.icon||"Settings"),e.jsx("span",{children:d.label})]})})},n))})})]}),r.addons&&Object.keys(r.addons).length>0&&e.jsxs(pe,{children:[e.jsx(he,{children:"Addons"}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.addons).map(([n,d])=>e.jsx(L,{children:e.jsx(W,{asChild:!0,tooltip:`${d.label} (Pro)`,onClick:()=>i(n),className:a===n?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[Ve(d.icon||"Shield"),e.jsx("span",{children:d.label}),e.jsx(Se,{className:"size-3 text-orange-500 ml-auto"})]})})},n))})})]}),r.integrations&&r.integrations.children&&e.jsxs(pe,{children:[e.jsx(he,{children:r.integrations.label}),e.jsx(be,{children:e.jsx(B,{children:Object.entries(r.integrations.children).map(([n,d])=>{const m=Vt[n]||U;return"children"in d&&d.children?e.jsx(Bt,{className:"group/collapsible",children:e.jsxs(L,{children:[e.jsx(Lt,{asChild:!0,children:e.jsxs(W,{tooltip:d.label,className:"flex items-center gap-2",children:[e.jsx(m,{className:"size-4"}),e.jsx("span",{children:d.label}),e.jsx(ba,{className:"ml-auto size-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(Wt,{children:e.jsx($s,{children:Object.entries(d.children).map(([x,b])=>"name"in b?e.jsx(zs,{children:e.jsx(Fs,{asChild:!0,onClick:()=>i(b.name),className:a===b.name?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsx("button",{className:"w-full text-left",children:b.label})})},x):null)})})]})},n):null})})})]})]}),e.jsx(Ps,{})]}):null}const $=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",s),...a}));$.displayName="Card";const ie=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",s),...a}));ie.displayName="CardHeader";const Re=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("font-semibold leading-none tracking-tight",s),...a}));Re.displayName="CardTitle";const _e=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("text-sm text-muted-foreground",s),...a}));_e.displayName="CardDescription";const G=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("p-6 pt-0",s),...a}));G.displayName="CardContent";const Jt=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:u("flex items-center p-6 pt-0",s),...a}));Jt.displayName="CardFooter";const Kt=K("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _({className:s,variant:a,...t}){return e.jsx("div",{className:u(Kt({variant:a}),s),...t})}const Yt={new:{label:"New",color:"bg-green-100 text-green-800",icon:is},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:os},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:ns},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:rs},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:ts},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:as}};function Zt({section:s,children:a}){const t=s.tag?Yt[s.tag]:null,r=t==null?void 0:t.icon,o=()=>{switch(s.layout){case"2-column":return"grid grid-cols-1 md:grid-cols-2 gap-6";case"3-column":return"grid grid-cols-1 md:grid-cols-3 gap-6";default:return"space-y-6"}};return e.jsxs($,{className:`mb-6 ${s.readonly?"opacity-60 pointer-events-none":""}`,children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Re,{className:"text-xl",children:s.title}),s.readonly&&e.jsx(_,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Read Only"}),t&&e.jsxs(_,{variant:"secondary",className:t.color,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})]}),s.subtitle&&e.jsx(_e,{className:"text-base",children:s.subtitle})]}),s.helpUrl&&!s.readonly&&e.jsx(E,{variant:"ghost",size:"sm",asChild:!0,className:"flex-shrink-0",children:e.jsxs("a",{href:s.helpUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Help"}),e.jsx(Aa,{className:"w-3 h-3"})]})})]})}),e.jsx(G,{children:e.jsx("div",{className:o(),children:a})})]})}const Qt=K("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=l.forwardRef(({className:s,...a},t)=>e.jsx(ls,{ref:t,className:u(Qt(),s),...a}));O.displayName=ls.displayName;function F({content:s,className:a}){return s?e.jsx("div",{className:u("text-sm text-muted-foreground [&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",a),dangerouslySetInnerHTML:{__html:s}}):null}const er={new:{label:"New",color:"bg-green-100 text-green-800",icon:is},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:os},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:ns},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:rs},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:ts},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:as}};function Y({tag:s,className:a=""}){const t=er[s];if(!t)return null;const r=t.icon;return e.jsxs(_,{variant:"secondary",className:`${t.color} ${a}`,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})}function qe({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Y,{tag:d})]}),e.jsx(z,{id:o,value:a||"",onChange:m=>t(m.target.value),disabled:n,placeholder:s.placeholder}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const $e=l.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:u("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a}));$e.displayName="Textarea";function sr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,rows:m}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Y,{tag:d})]}),e.jsx($e,{id:o,value:a||"",onChange:x=>t(x.target.value),disabled:n,rows:m,placeholder:s.placeholder}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function ar({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,min:m,max:x,step:b}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Y,{tag:d})]}),e.jsx(z,{id:o,type:"number",value:a||"",onChange:g=>t(g.target.value),placeholder:s.placeholder,min:m,max:x,step:b,disabled:n}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const Bs=l.forwardRef(({className:s,...a},t)=>e.jsx(ds,{ref:t,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(Ea,{className:u("flex items-center justify-center text-current"),children:e.jsx(re,{className:"h-4 w-4"})})}));Bs.displayName=ds.displayName;function tr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`flex items-center space-x-2 ${n?"opacity-50":""}`,children:[e.jsx(Bs,{id:o,checked:a||!1,onCheckedChange:m=>t(m),disabled:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Y,{tag:d})]}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}const rr=Ye,Ls=l.forwardRef(({className:s,...a},t)=>e.jsx(je,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Ls.displayName=je.displayName;const nr=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(rr,{children:[e.jsx(Ls,{}),e.jsxs(ye,{ref:r,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(Ze,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nr.displayName=ye.displayName;const or=l.forwardRef(({className:s,...a},t)=>e.jsx(ve,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",s),...a}));or.displayName=ve.displayName;const ir=l.forwardRef(({className:s,...a},t)=>e.jsx(Ne,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));ir.displayName=Ne.displayName;const ze=l.forwardRef(({className:s,...a},t)=>e.jsx(R,{ref:t,className:u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...a}));ze.displayName=R.displayName;const Fe=l.forwardRef(({className:s,...a},t)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Da,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(R.Input,{ref:t,className:u("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...a})]}));Fe.displayName=R.Input.displayName;const Be=l.forwardRef(({className:s,...a},t)=>e.jsx(R.List,{ref:t,className:u("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...a}));Be.displayName=R.List.displayName;const Le=l.forwardRef((s,a)=>e.jsx(R.Empty,{ref:a,className:"py-6 text-center text-sm",...s}));Le.displayName=R.Empty.displayName;const H=l.forwardRef(({className:s,...a},t)=>e.jsx(R.Group,{ref:t,className:u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...a}));H.displayName=R.Group.displayName;const lr=l.forwardRef(({className:s,...a},t)=>e.jsx(R.Separator,{ref:t,className:u("-mx-1 h-px bg-border",s),...a}));lr.displayName=R.Separator.displayName;const V=l.forwardRef(({className:s,...a},t)=>e.jsx(R.Item,{ref:t,className:u("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...a}));V.displayName=R.Item.displayName;const Ws=Oa,Us=Ta,We=l.forwardRef(({className:s,align:a="center",sideOffset:t=4,...r},o)=>e.jsx(Ma,{children:e.jsx(cs,{ref:o,align:a,sideOffset:t,className:u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));We.displayName=cs.displayName;function dr({options:s,value:a,onValueChange:t,placeholder:r="Select an option...",searchPlaceholder:o="Search options...",emptyText:c="No options found.",className:i}){const[n,d]=l.useState(!1),m=!Array.isArray(s)&&Object.values(s).some(g=>typeof g=="object"),b=(()=>{if(!a)return"";if(Array.isArray(s)){const g=s.find(w=>w.value===a||Object.keys(w)[0]===a);return g?g.label||Object.values(g)[0]:""}if(m){for(const[g,w]of Object.entries(s))if(typeof w=="object"){for(const[j,v]of Object.entries(w))if(j===a)return v}}else return s[a]||"";return""})();return e.jsxs(Ws,{open:n,onOpenChange:d,children:[e.jsx(Us,{asChild:!0,children:e.jsxs(E,{variant:"outline",role:"combobox","aria-expanded":n,className:u("w-full justify-between",i),children:[b||r,e.jsx(Ia,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(We,{className:"w-full p-0",align:"start",children:e.jsxs(ze,{children:[e.jsx(Fe,{placeholder:o}),e.jsxs(Be,{children:[e.jsx(Le,{children:c}),m?Object.entries(s).map(([g,w])=>typeof w=="object"?e.jsx(H,{heading:g,children:Object.entries(w).map(([j,v])=>e.jsxs(V,{value:j,onSelect:C=>{t(C===a?"":C),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===j?"opacity-100":"opacity-0")}),v]},j))},g):null):Array.isArray(s)?e.jsx(H,{children:s.map(g=>{const w=g.value||Object.keys(g)[0],j=g.label||Object.values(g)[0];return e.jsxs(V,{value:w,onSelect:v=>{t(v===a?"":v),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===w?"opacity-100":"opacity-0")}),j]},w)})}):e.jsx(H,{children:Object.entries(s).map(([g,w])=>e.jsxs(V,{value:g,onSelect:j=>{t(j===a?"":j),d(!1)},children:[e.jsx(re,{className:u("mr-2 h-4 w-4",a===g?"opacity-100":"opacity-0")}),w]},g))})]})]})})]})}function cr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d}=s;return e.jsxs("div",{className:`space-y-2 ${n?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,className:n?"text-muted-foreground":"",children:c}),n&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),d&&e.jsx(Y,{tag:d})]}),e.jsx(dr,{options:s.options,value:a||"",onValueChange:t,placeholder:"Select an option",searchPlaceholder:"Search options...",disabled:n}),i&&e.jsx("div",{className:n?"opacity-70":"",children:e.jsx(F,{content:i})}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function ur({item:s,onRemove:a,onMoveUp:t,onMoveDown:r,canMoveUp:o,canMoveDown:c}){return e.jsxs(_,{variant:"secondary",className:"mr-1 mb-1 flex items-center gap-1",children:[o&&e.jsx("button",{type:"button",className:"p-0.5 hover:bg-muted rounded",onClick:t,"aria-label":"Move up",children:e.jsx(Pa,{className:"h-3 w-3"})}),c&&e.jsx("button",{type:"button",className:"p-0.5 hover:bg-muted rounded",onClick:r,"aria-label":"Move down",children:e.jsx($a,{className:"h-3 w-3"})}),e.jsx("span",{className:"flex-1",children:s.label}),e.jsx("button",{type:"button",className:"ml-1 p-0.5 hover:bg-muted rounded",onClick:()=>a(s.value),"aria-label":"Remove",children:e.jsx(we,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]})}function mr({item:s,onRemove:a}){return e.jsxs(_,{variant:"secondary",className:"mr-1 mb-1 flex items-center",children:[s.label,e.jsx("button",{type:"button",className:"ml-1 p-0.5 hover:bg-muted rounded",onClick:()=>a(s.value),"aria-label":"Remove",children:e.jsx(we,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]})}function xr({options:s,value:a=[],onValueChange:t,placeholder:r="Select options...",searchPlaceholder:o="Search options...",emptyText:c="No options found.",className:i,sortable:n=!1}){const[d,m]=l.useState(!1),x=!Array.isArray(s)&&Object.values(s).some(p=>typeof p=="object"),b=p=>{if(Array.isArray(s)){const f=s.find(h=>h.value===p||Object.keys(h)[0]===p);return f?f.label||Object.values(f)[0]:p}if(x){for(const[f,h]of Object.entries(s))if(typeof h=="object"){for(const[N,T]of Object.entries(h))if(N===p)return typeof T=="string"?T:p}}else{const f=s[p];return typeof f=="string"?f:p}return p},g=p=>{const f=a.includes(p)?a.filter(h=>h!==p):[...a,p];t(f)},w=p=>{t(a.filter(f=>f!==p))},j=p=>{if(p>0){const f=[...a],h=f[p];f[p]=f[p-1],f[p-1]=h,t(f)}},v=p=>{if(p<a.length-1){const f=[...a],h=f[p];f[p]=f[p+1],f[p+1]=h,t(f)}},C=a.map(p=>({value:p,label:b(p)}));return e.jsx("div",{className:u("w-full",i),children:e.jsxs(Ws,{open:d,onOpenChange:m,children:[e.jsx(Us,{asChild:!0,children:e.jsx(E,{variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between h-auto min-h-9 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1 flex-1",children:C.length>0?n?C.map((p,f)=>e.jsx(ur,{item:p,onRemove:w,onMoveUp:()=>j(f),onMoveDown:()=>v(f),canMoveUp:f>0,canMoveDown:f<C.length-1},p.value)):C.map((p,f)=>e.jsx(mr,{item:p,onRemove:w},p.value)):e.jsx("span",{className:"text-muted-foreground",children:r})})})}),e.jsx(We,{className:"w-full p-0",align:"start",children:e.jsxs(ze,{children:[e.jsx(Fe,{placeholder:o}),e.jsxs(Be,{children:[e.jsx(Le,{children:c}),x?Object.entries(s).map(([p,f])=>typeof f=="object"?e.jsx(H,{heading:p,children:Object.entries(f).map(([h,N])=>e.jsxs(V,{onSelect:()=>g(h),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(h)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(h)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof N=="string"?N:h]},h))},p):null):Array.isArray(s)?e.jsx(H,{children:s.map(p=>{const f=p.value||Object.keys(p)[0],h=p.label||Object.values(p)[0];return e.jsxs(V,{onSelect:()=>g(f),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(f)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(f)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof h=="string"?h:f]},f)})}):e.jsx(H,{children:Object.entries(s).map(([p,f])=>e.jsxs(V,{onSelect:()=>g(p),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(p)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:a.includes(p)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),typeof f=="string"?f:p]},p))})]})]})})]})})}function fr({field:s,value:a,onChange:t,error:r}){const{key:o,label:c,description:i,readonly:n,tag:d,sortable:m}=s;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:o,children:c}),d&&e.jsx(Y,{tag:d})]}),e.jsx(xr,{options:s.options,value:Array.isArray(a)?a:[],onValueChange:t,placeholder:"Select options",searchPlaceholder:"Search options...",sortable:m,disabled:n}),i&&e.jsx(F,{content:i}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function pr({field:s}){const{label:a,description:t}=s;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ie,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:a}),t&&e.jsx(F,{content:t})]})}function hr({field:s}){const{label:a,description:t}=s;return e.jsxs(I,{className:"border-blue-200 bg-blue-50 text-blue-800",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsxs(P,{className:"text-blue-800",children:[e.jsx("div",{className:"font-medium",children:a}),t&&e.jsx("div",{className:"mt-1 text-sm",dangerouslySetInnerHTML:{__html:t}})]})]})}function br({field:s,value:a}){const{key:t,label:r,description:o,tag:c}=s;return e.jsxs("div",{className:"space-y-2",children:[r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r}),c&&e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:c})]}),e.jsx("div",{className:"[&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",dangerouslySetInnerHTML:{__html:a||""}}),o&&e.jsx(F,{content:o})]})}const gr=Fa,jr=za,Gs=l.forwardRef(({className:s,...a},t)=>e.jsx(us,{className:u("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Gs.displayName=us.displayName;const Hs=l.forwardRef(({className:s,...a},t)=>e.jsxs(jr,{children:[e.jsx(Gs,{}),e.jsx(ms,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));Hs.displayName=ms.displayName;const Vs=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",s),...a});Vs.displayName="AlertDialogHeader";const qs=({className:s,...a})=>e.jsx("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});qs.displayName="AlertDialogFooter";const Xs=l.forwardRef(({className:s,...a},t)=>e.jsx(xs,{ref:t,className:u("text-lg font-semibold",s),...a}));Xs.displayName=xs.displayName;const Js=l.forwardRef(({className:s,...a},t)=>e.jsx(fs,{ref:t,className:u("text-sm text-muted-foreground",s),...a}));Js.displayName=fs.displayName;const Ks=l.forwardRef(({className:s,...a},t)=>e.jsx(ps,{ref:t,className:u(Te(),s),...a}));Ks.displayName=ps.displayName;const Ys=l.forwardRef(({className:s,...a},t)=>e.jsx(hs,{ref:t,className:u(Te({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Ys.displayName=hs.displayName;function yr({id:s,index:a,isLocked:t,canRemove:r,onRemove:o,children:c}){const[i,n]=l.useState(!1),{attributes:d,listeners:m,setNodeRef:x,transform:b,transition:g,isDragging:w}=Ka({id:s,disabled:t}),j={transform:Ya.Transform.toString(b),transition:g},v=()=>{o(),n(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs($,{ref:x,style:j,className:`relative transition-all duration-200 ${w?"opacity-50 scale-105 shadow-lg z-50":""} ${t?"cursor-not-allowed":""}`,children:[e.jsx(ie,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{...d,...m,className:`flex items-center justify-center w-6 h-6 rounded ${t?"cursor-not-allowed opacity-50":"cursor-grab active:cursor-grabbing hover:bg-muted"}`,"aria-label":"Drag to reorder",children:e.jsx(Za,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("span",{className:"text-sm font-medium",children:["Item ",a+1]})]}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",disabled:!r||t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:()=>n(!0),children:e.jsx(Qa,{className:"h-4 w-4"})})]})}),e.jsx(G,{className:"pt-0",children:c})]}),e.jsx(gr,{open:i,onOpenChange:n,children:e.jsxs(Hs,{children:[e.jsxs(Vs,{children:[e.jsx(Xs,{children:"Delete Item"}),e.jsxs(Js,{children:["Are you sure you want to delete Item ",a+1,"? This action cannot be undone."]})]}),e.jsxs(qs,{children:[e.jsx(Ys,{children:"Cancel"}),e.jsx(Ks,{onClick:v,children:"Delete"})]})]})})]})}function wr({label:s,description:a,tooltip:t,isPro:r=!1,isLocked:o=!1,minItems:c=0,maxItems:i=10,addButtonText:n="Add Item",children:d,value:m=[{}],onChange:x}){const[b,g]=l.useState(()=>m.map((f,h)=>({...f,id:f.id||`item-${Date.now()}-${h}`})));l.useEffect(()=>{g(m.map((f,h)=>({...f,id:f.id||`item-${Date.now()}-${h}`})))},[m]);const w=Ba(Ge(Ja,{activationConstraint:{distance:8}}),Ge(Xa,{coordinateGetter:qa})),j=()=>{if(b.length<i){const f={id:`item-${Date.now()}`},h=[...b,f];g(h),x==null||x(h)}},v=f=>{if(b.length>c){const h=b.filter((N,T)=>T!==f);g(h),x==null||x(h)}},C=(f,h)=>{const N=[...b];N[f]={...N[f],...h},g(N),x==null||x(N)},p=f=>{const{active:h,over:N}=f;if(h.id!==(N==null?void 0:N.id)){const T=b.findIndex(Z=>Z.id===h.id),Ae=b.findIndex(Z=>Z.id===(N==null?void 0:N.id)),de=Va(b,T,Ae);g(de),x==null||x(de)}};return e.jsx(Pe,{children:e.jsxs("div",{className:`space-y-4 ${o?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"text-sm font-medium leading-none",children:s}),t&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(ke,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(X,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(_,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(X,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),a&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a}),e.jsx("div",{className:`space-y-3 ${o?"pointer-events-none":""}`,children:e.jsx(La,{sensors:w,collisionDetection:Wa,onDragEnd:p,children:e.jsx(Ua,{items:b.map(f=>f.id),strategy:Ga,children:b.map((f,h)=>e.jsx(yr,{id:f.id,index:h,isLocked:o,canRemove:b.length>c,onRemove:()=>v(h),children:d(h,N=>C(h,N),()=>v(h))},f.id))})})}),e.jsxs(E,{type:"button",variant:"outline",onClick:j,disabled:b.length>=i||o,className:"w-full",children:[e.jsx(Ha,{className:"mr-2 h-4 w-4"}),n]}),b.length>=i&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum ",i," items allowed"]})]})})}function vr(s){const[a,t]=l.useState([]),[r,o]=l.useState(!1),[c,i]=l.useState(null);return l.useEffect(()=>{(async()=>{if(!s||s==="default"){t([]);return}try{o(!0),i(null);const d=window.WP_SMS_DATA;if(!d)throw new Error("WP_SMS_DATA not available");const m=await fetch(`${d.restUrl}gateways/fields/${s}`,{headers:{"X-WP-Nonce":d.nonce,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const x=await m.json();if(!x.success)throw new Error(x.message||"Failed to fetch gateway fields");t(x.data)}catch(d){i(d instanceof Error?d.message:"An error occurred"),console.error("Failed to fetch gateway fields:",d)}finally{o(!1)}})()},[s]),{data:a,loading:r,error:c}}function le({label:s,description:a,tooltip:t,isPro:r=!1,isRequired:o=!1,isLocked:c=!1,children:i,htmlFor:n}){return e.jsx(Pe,{children:e.jsxs("div",{className:`space-y-2 ${c?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{htmlFor:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${c?"text-muted-foreground":""}`,children:[s,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),c&&e.jsx(_,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),t&&!c&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(ke,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(X,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&!c&&e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(_,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(X,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),e.jsx("div",{className:c?"pointer-events-none":"",children:i}),a&&e.jsx("p",{className:`text-sm leading-relaxed ${c?"text-muted-foreground opacity-70":"text-muted-foreground"}`,children:a})]})})}const Nr=l.forwardRef(({className:s,...a},t)=>e.jsx(bs,{className:u("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:e.jsx(et,{className:u("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Nr.displayName=bs.displayName;const Sr=it,kr=lt,Zs=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(gs,{ref:r,className:u("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(st,{asChild:!0,children:e.jsx(js,{className:"h-4 w-4 opacity-50"})})]}));Zs.displayName=gs.displayName;const Qs=l.forwardRef(({className:s,...a},t)=>e.jsx(ys,{ref:t,className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(at,{className:"h-4 w-4"})}));Qs.displayName=ys.displayName;const ea=l.forwardRef(({className:s,...a},t)=>e.jsx(ws,{ref:t,className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(js,{className:"h-4 w-4"})}));ea.displayName=ws.displayName;const sa=l.forwardRef(({className:s,children:a,position:t="popper",...r},o)=>e.jsx(tt,{children:e.jsxs(vs,{ref:o,className:u("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(Qs,{}),e.jsx(rt,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(ea,{})]})}));sa.displayName=vs.displayName;const Cr=l.forwardRef(({className:s,...a},t)=>e.jsx(Ns,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",s),...a}));Cr.displayName=Ns.displayName;const aa=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ss,{ref:r,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(nt,{children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsx(ot,{children:a})]}));aa.displayName=Ss.displayName;const Rr=l.forwardRef(({className:s,...a},t)=>e.jsx(ks,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",s),...a}));Rr.displayName=ks.displayName;const _r=l.forwardRef(({className:s,...a},t)=>e.jsx(Cs,{className:u("grid gap-2",s),...a,ref:t}));_r.displayName=Cs.displayName;const Ar=l.forwardRef(({className:s,...a},t)=>e.jsx(Rs,{ref:t,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(dt,{className:"flex items-center justify-center",children:e.jsx(ct,{className:"h-3.5 w-3.5 fill-primary"})})}));Ar.displayName=Rs.displayName;const Er=l.forwardRef(({className:s,...a},t)=>e.jsxs(_s,{ref:t,className:u("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(ut,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(mt,{className:"absolute h-full bg-primary"})}),e.jsx(xt,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Er.displayName=_s.displayName;function Dr({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,onChange:d}){return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsx(z,{value:a,placeholder:t,onChange:m=>d==null?void 0:d(m.target.value),disabled:n,className:"w-full"})})}function Mr({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,onChange:d}){const[m,x]=l.useState(!1);return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{type:m?"text":"password",value:a,placeholder:t,onChange:b=>d==null?void 0:d(b.target.value),disabled:n,className:"w-full pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!m),disabled:n,children:m?e.jsx(ft,{className:"h-4 w-4"}):e.jsx(pt,{className:"h-4 w-4"})})]})})}function Or({label:s,value:a,placeholder:t,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,rows:d=3,onChange:m}){return e.jsx(le,{label:s,description:r,tooltip:o,isPro:c,isRequired:i,isLocked:n,children:e.jsx($e,{value:a,placeholder:t,rows:d,onChange:x=>m==null?void 0:m(x.target.value),disabled:n,className:"w-full resize-none"})})}function Tr({label:s,value:a,placeholder:t,options:r,description:o,tooltip:c,isPro:i,isRequired:n,isLocked:d,onChange:m}){return e.jsx(le,{label:s,description:o,tooltip:c,isPro:i,isRequired:n,isLocked:d,children:e.jsxs(Sr,{value:a,onValueChange:m,disabled:d,children:[e.jsx(Zs,{className:"w-full",children:e.jsx(kr,{placeholder:t})}),e.jsx(sa,{children:r.map(x=>e.jsx(aa,{value:x.value,children:x.label},x.value))})]})})}function Ir({label:s,value:a="#ff6b35",description:t,tooltip:r,isPro:o,isLocked:c,onChange:i}){return e.jsx(le,{label:s,description:t,tooltip:r,isPro:o,isLocked:c,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{type:"color",value:a,onChange:n=>i==null?void 0:i(n.target.value),disabled:c,className:"w-12 h-10 p-1 border rounded cursor-pointer"}),e.jsx(z,{type:"text",value:a,onChange:n=>i==null?void 0:i(n.target.value),disabled:c,className:"flex-1",placeholder:"#ff6b35"})]})})}function Pr({gatewayName:s,formData:a,onFieldChange:t}){const{data:r,loading:o,error:c}=vr(s);return M.useEffect(()=>{r&&r.length>0&&r.forEach(i=>{i.id in a||t(i.id,"")})},[r,a,t]),o?e.jsx($,{children:e.jsxs(G,{className:"flex items-center justify-center py-8",children:[e.jsx(ge,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading gateway fields..."})]})}):c?e.jsx($,{children:e.jsx(G,{className:"py-4",children:e.jsx(I,{variant:"destructive",children:e.jsxs(P,{children:["Failed to load gateway fields: ",c]})})})}):!r||r.length===0?null:e.jsxs($,{children:[e.jsxs(ie,{children:[e.jsx(Re,{children:"Gateway Configuration"}),e.jsx(_e,{children:"Configure the specific settings for your selected gateway."})]}),e.jsx(G,{className:"space-y-6",children:(r||[]).map(i=>{const n=a[i.id]||"";switch(i.type){case"select":return e.jsx(Tr,{label:i.name,value:n,description:i.desc,options:i.options?Object.entries(i.options).map(([d,m])=>({value:d,label:m})):[],onChange:d=>t(i.id,d)},i.id);case"textarea":return e.jsx(Or,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id);case"password":return e.jsx(Mr,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id);default:return e.jsx(Dr,{label:i.name,value:n,description:i.desc,onChange:d=>t(i.id,d)},i.id)}})})]})}function $r(s,a){if(s.showIf){for(const[t,r]of Object.entries(s.showIf))if(a[t]!==r)return!1}if(s.hideIf){for(const[t,r]of Object.entries(s.hideIf))if(a[t]===r)return!1}return!0}function ta(s,a){if(!s.options_depends_on)return s.options;const t=s.options_depends_on,r=a[t];if(!r||r.length===0)return s.options;if(Array.isArray(s.options))return s.options.filter(c=>r.includes(c.value??Object.keys(c)[0]));const o={};return Object.entries(s.options).forEach(([c,i])=>{r.includes(c)&&(o[c]=i)}),o}function zr(){const s=t=>{if(typeof window<"u"&&window.wp&&window.wp.media)try{const r=window.wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1});r.on("select",()=>{const o=r.state().get("selection").first().toJSON();t(o.url)}),r.open()}catch(r){console.error("Error opening WordPress media uploader:",r),a(t)}else console.warn("WordPress media uploader not available, using fallback"),a(t)},a=t=>{const r=document.createElement("input");r.type="file",r.accept="image/*",r.style.display="none",r.onchange=o=>{var i;const c=(i=o.target.files)==null?void 0:i[0];if(c){const n=URL.createObjectURL(c);t(n),setTimeout(()=>URL.revokeObjectURL(n),1e3)}document.body.contains(r)&&document.body.removeChild(r)},document.body.appendChild(r),r.click()};return{openMediaUploader:s}}function Fr({field:s,value:a,onChange:t,error:r}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:s.key,children:s.label}),e.jsx(ht,{country:"us",value:a||"",onChange:t,inputProps:{name:s.key,id:s.key,className:"w-full"},enableSearch:!0,enableAreaCodes:!0,enableAreaCodeStretch:!0,disableDropdown:!1,countryCodeEditable:!0,buttonStyle:{}}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),r&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r})]})}function ra({field:s,value:a,onChange:t,error:r,formData:o}){const{type:c}=s,n=(x=>x.options_depends_on?{...x,options:ta(x,o)}:x)(s),{openMediaUploader:d}=zr();function m({field:x,value:b,onChange:g}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:x.label}),b&&e.jsx("img",{src:b,alt:"Preview",className:"mb-2 rounded border max-h-32"}),e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-1.5 border rounded bg-muted hover:bg-accent text-sm",onClick:()=>d(g),children:b?"Change Image":"Select Image"}),x.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:x.description})]})}switch(c){case"text":return e.jsx(qe,{field:n,value:a,onChange:t,error:r});case"textarea":return e.jsx(sr,{field:n,value:a,onChange:t,error:r});case"number":return e.jsx(ar,{field:n,value:a,onChange:t,error:r});case"checkbox":return e.jsx(tr,{field:n,value:a,onChange:t,error:r});case"select":case"advancedselect":case"countryselect":return e.jsx(cr,{field:n,value:a,onChange:t,error:r});case"multiselect":case"advancedmultiselect":return e.jsx(fr,{field:n,value:a,onChange:t,error:r});case"repeater":return e.jsx(wr,{label:n.label,description:n.description,value:a||[],onChange:t,children:(x,b,g)=>{const w=(a||[])[x]||{};return e.jsx("div",{className:"space-y-4",children:(n.fieldGroups||[]).map(j=>e.jsxs("div",{className:"space-y-4",children:[j.label&&e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:j.label}),j.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:j.description}),e.jsx("div",{className:`grid gap-4 ${j.layout==="2-column"?"grid-cols-1 md:grid-cols-2":j.layout==="3-column"?"grid-cols-1 md:grid-cols-3":"grid-cols-1"}`,children:(j.fields||[]).map(v=>{`${n.key}${x}${v.key}`;const C=w[v.key]||"";return e.jsx("div",{className:"space-y-2",children:e.jsx(ra,{field:v,value:C,onChange:p=>{b({[v.key]:p})},error:void 0,formData:o||{}})},v.key)})})]},j.key))})}});case"color":return e.jsx(Ir,{label:n.label,value:a,onChange:t,description:n.description});case"tel":return e.jsx(Fr,{field:n,value:a,onChange:t,error:r});case"gateway":return e.jsx(Pr,{field:n,value:a,onChange:t,error:r});case"header":return e.jsx(pr,{field:n,value:a,onChange:t,error:r});case"notice":return e.jsx(hr,{field:n,value:a,onChange:t,error:r});case"html":return e.jsx(br,{field:n,value:a,onChange:t,error:r});case"image":return e.jsx(m,{field:n,value:a,onChange:t});default:return console.warn(`Unknown field type: ${c}`),e.jsx(qe,{field:n,value:a,onChange:t,error:r})}}function Br(s){const a=l.useRef(null),t=l.useRef(null);s!==a.current&&(a.current=s,t.current=s);const r=l.useCallback((n,d)=>{t.current&&(t.current={...t.current,[n]:d})},[]),o=l.useCallback(()=>{if(!a.current||!t.current)return{};const n={};return Object.keys(t.current).forEach(d=>{const m=a.current[d],x=t.current[d];Array.isArray(x)&&Array.isArray(m)?JSON.stringify(x)!==JSON.stringify(m)&&(n[d]=x):x!==m&&(n[d]=x)}),n},[]),c=l.useCallback(()=>Object.keys(o()).length>0,[o]),i=l.useCallback(()=>{t.current=a.current},[]);return{updateValue:r,getChangedFields:o,hasChanges:c,resetChanges:i}}class na extends Error{constructor(a,t){super(a),this.fields=t,this.name="ValidationError"}}class Lr{async saveSettings(a){try{const t=window.WP_SMS_DATA,r=`${t.restUrl}settings/save`;console.log("Saving settings to:",r);const o=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},body:JSON.stringify(a)}),c=await o.json();if(!o.ok)if(o.status===422){const i=c;throw new na(i.message,i.data.fields)}else{const i=c;throw new Error(i.message||"Failed to save settings")}return c}catch(t){throw t instanceof Error?t:new Error("Network error occurred while saving settings")}}}const Xe=new Lr;function Wr({schema:s,savedValues:a,loading:t,error:r,onSaveSuccess:o,onSchemaRefresh:c,onValuesRefresh:i}){var Ue;const[n,d]=M.useState({}),[m,x]=M.useState(!1),[b,g]=M.useState(null),[w,j]=M.useState({}),[v,C]=M.useState(!1),{updateValue:p,getChangedFields:f,hasChanges:h,resetChanges:N}=Br(a);M.useEffect(()=>{if(s){const y={};s.sections.forEach(S=>{S.fields.forEach(k=>{if(a&&a.hasOwnProperty(k.key))y[k.key]=a[k.key];else if(k.default!==void 0)y[k.key]=k.default;else switch(k.type){case"checkbox":y[k.key]=!1;break;case"multiselect":case"advancedmultiselect":y[k.key]=[];break;default:y[k.key]=""}})}),d(y),N()}},[s,a,N]);const T=(y,S)=>{d(D=>({...D,[y]:S})),p(y,S);const k=s==null?void 0:s.sections.flatMap(D=>D.fields).find(D=>D.key===y);k!=null&&k.auto_save_and_refresh&&Ae(y,S),s&&s.sections.flatMap(A=>A.fields).filter(A=>A.options_depends_on===y).forEach(A=>{const Q=n[A.key];if(Q&&Array.isArray(Q)){const Ee=ta(A,{...n,[y]:S});let ee;if(Array.isArray(Ee)){const se=Ee.map(q=>q.value||Object.keys(q)[0]);ee=Q.filter(q=>se.includes(q))}else{const se=Object.keys(Ee);ee=Q.filter(q=>se.includes(q))}ee.length!==Q.length&&(d(se=>({...se,[A.key]:ee})),p(A.key,ee))}}),w[y]&&j(D=>{const A={...D};return delete A[y],A})},Ae=async(y,S)=>{try{x(!0),g(null),(await Xe.saveSettings({[y]:S})).success?(C(!0),N(),c==null||c(),i==null||i(),setTimeout(()=>C(!1),3e3)):g("Failed to save field and refresh schema")}catch(k){g(k instanceof Error?k.message:"An unexpected error occurred")}finally{x(!1)}},de=async()=>{if(s){x(!0),g(null),j({});try{const y=f(),S=Object.keys(y);if(S.length===0){x(!1);return}(await Xe.saveSettings(y)).success?(C(!0),d(D=>({...D,...y})),N(),o==null||o(S),setTimeout(()=>C(!1),3e3)):g("Failed to save settings")}catch(y){y instanceof na?(j(y.fields),g("Please fix the validation errors below")):g(y instanceof Error?y.message:"An unexpected error occurred")}finally{x(!1)}}},Z=()=>{a&&(d(a),N()),j({}),C(!1)};return M.useEffect(()=>{v&&window.scrollTo({top:0,behavior:"smooth"})},[v]),M.useEffect(()=>{const y=S=>{if(h())return S.preventDefault(),S.returnValue="",""};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y)}},[n,w]),t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ge,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading settings..."})]}):r?e.jsxs(I,{variant:"destructive",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:r})]}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-primary/10 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:(()=>{const y=bt[s.icon]||U;return e.jsx(y,{})})()})}),e.jsxs("div",{children:[e.jsx(Re,{className:"text-xl",children:s.label}),e.jsx(_e,{children:"Configure your settings and preferences"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.sections.some(y=>y.helpUrl)&&e.jsx(E,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:(Ue=s.sections.find(y=>y.helpUrl))==null?void 0:Ue.helpUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Help"]})})})]})})}),v&&e.jsxs(I,{className:"border-green-200 bg-green-50",children:[e.jsx(gt,{className:"h-4 w-4 text-green-600"}),e.jsx(P,{className:"text-green-800",children:"Settings saved successfully!"})]}),b&&e.jsxs(I,{variant:"destructive",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:b})]}),e.jsx("div",{className:"space-y-6",children:(s.sections||[]).map(y=>e.jsx(Zt,{section:y,children:e.jsx("div",{className:"space-y-6",children:(y.fields||[]).filter(S=>$r(S,n)).map(S=>e.jsx(ra,{field:S,value:n[S.key],onChange:k=>T(S.key,k),error:w[S.key],formData:n},S.key))})},y.id))}),e.jsx($,{children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{onClick:de,disabled:m||!h(),className:"min-w-[100px]",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"}),e.jsx(E,{variant:"outline",onClick:Z,disabled:m||!h(),children:"Reset"})]}),h()&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"})]})})})]}):e.jsxs(I,{children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(P,{children:"No settings schema available."})]})}function Ur(s){const[a,t]=l.useState(null),[r,o]=l.useState(!1),[c,i]=l.useState(null),n=async()=>{if(!s){t(null);return}try{o(!0),i(null);const m=window.WP_SMS_DATA;if(!m)throw new Error("WP_SMS_DATA not available");const x=await fetch(`${m.restUrl}settings/schema/group/${s}`,{headers:{"X-WP-Nonce":m.nonce,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const b=await x.json();if(!b.success)throw new Error(b.message||"Failed to fetch group schema");t(b.data)}catch(m){i(m instanceof Error?m.message:"An error occurred"),console.error("Failed to fetch group schema:",m)}finally{o(!1)}};return l.useEffect(()=>{n()},[s]),{data:a,loading:r,error:c,refresh:()=>{n()}}}function Gr(s){const[a,t]=l.useState(null),[r,o]=l.useState(!1),[c,i]=l.useState(null),n=async()=>{if(!s){t(null);return}try{o(!0),i(null);const m=window.WP_SMS_DATA;if(!m)throw new Error("WP_SMS_DATA not available");const x=await fetch(`${m.restUrl}settings/values/group/${s}`,{headers:{"X-WP-Nonce":m.nonce,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const b=await x.json();if(!b.success)throw new Error(b.message||"Failed to fetch group values");t(b.data)}catch(m){i(m instanceof Error?m.message:"An error occurred"),console.error("Failed to fetch group values:",m)}finally{o(!1)}};return l.useEffect(()=>{n()},[s]),{data:a,loading:r,error:c,refresh:()=>{n()}}}function Hr(){const s=()=>new URLSearchParams(window.location.search).get("group")||"general",[a,t]=l.useState(s),{data:r,loading:o,error:c,refresh:i}=Ur(a),{data:n,loading:d,error:m,refresh:x}=Gr(a),b=j=>{t(j);const v=new URL(window.location.href);v.searchParams.set("group",j),window.history.pushState({},"",v.toString())};l.useEffect(()=>{const j=()=>{const v=s();t(v)};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[]);const g=o||d,w=c||m;return e.jsx(Is,{children:e.jsxs("div",{className:"flex w-full min-h-[600px]",children:[e.jsx(Xt,{onGroupSelect:b,selectedGroup:a}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your SMS plugin configuration and preferences."})]}),e.jsx(Wr,{schema:r,savedValues:n,loading:g,error:w,onSchemaRefresh:i,onValuesRefresh:x})]})})]})})}const Je=document.getElementById("wp-sms-settings-root");Je?jt.createRoot(Je).render(e.jsx(Hr,{})):(console.error("WP SMS Settings: Missing #wp-sms-settings-root element in DOM."),console.log("WP SMS Settings: Available elements with similar IDs:",Array.from(document.querySelectorAll('[id*="wp-sms"]')).map(s=>s.id)));
