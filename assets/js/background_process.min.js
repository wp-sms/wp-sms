(()=>{var t={migrationNotice:null,init:function(){this.migrationNotice=jQuery("#wp-sms-background-process-notice"),this.bindEvents(),"progress"===WP_Sms_Ajax_Migrator_Object.status&&this.startMigration()},bindEvents:function(){this.migrationNotice.length&&this.migrationNotice.find("#start-migration-btn").on("click",this.handleStartMigration)},handleStartMigration:function(t){t.preventDefault(),window.location.href=jQuery(this).attr("href")},startMigration:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;jQuery.ajax({url:WP_Sms_Ajax_Migrator_Object.ajax_url,method:"POST",data:{action:"wp_sms_background_process",wps_nonce:WP_Sms_Ajax_Migrator_Object.rest_api_nonce,total:i},success:function(e){var n;e.success&&(e.data.completed?t.markAsCompleted():(t.updateProgress(e.data.percentage),i=parseInt(null===(n=e.data)||void 0===n?void 0:n.total,10)||0,t.startMigration(i)))},error:function(t,i,e){console.error("AJAX request error:",i,e)}})},updateProgress:function(t){this.migrationNotice.length&&this.migrationNotice.find(".remain-percentage").text(t)},markAsCompleted:function(){this.migrationNotice.length&&(this.migrationNotice.closest(".notice").removeClass("notice-info").addClass("notice-success"),this.migrationNotice.html("\n                <p><strong>WP SMS: Migration Complete</strong></p>\n                <p>All records have been successfully migrated. WP SMS is now up-to-date.</p>\n            "))}};jQuery(document).ready((function(){t.init()}))})();