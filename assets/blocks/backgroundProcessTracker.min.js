(()=>{var e={intervalMs:Wp_Sms_Async_Background_Process_Data.interval||5e3,migrationNotice:null,processedElement:null,precentElement:null,timer:null,isActive:!0,currentProcess:null,init:function(){this.currentProcess=Wp_Sms_Background_Process_Data.current_process,this.currentProcess&&(this.migrationNotice=jQuery("#wp-sms-async-background-process-notice"),this.bindEvents())},bindEvents:function(){if(this.migrationNotice&&this.migrationNotice.length){this.processedElement=this.migrationNotice.find(".processed").first(),this.precentElement=this.migrationNotice.find(".percentage").first();var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.updateProgress()}),this.intervalMs)}},updateProgress:function(){if(this.isActive){jQuery.ajax({url:Wp_Sms_Async_Background_Process_Data.ajax_url,method:"POST",data:{action:"wp_sms_async_background_process",wps_nonce:Wp_sms_Async_Background_Process_Data.rest_api_nonce,current_process:this.currentProcess},success:function(t){t.data.completed?e.markAsCompleted():(e.updatePercent(t.data.percentage),e.updateProcessed(t.data.processed))},error:function(e,t,s){console.error("AJAX request error:",t,s)}})}},markAsCompleted:function(){this.migrationNotice.length&&(this.migrationNotice.closest(".notice").removeClass("notice-info").addClass("notice-success"),this.migrationNotice.html("\n                <p><strong>WP Sms: Background process completed successfully.</strong></p>\n            ")),this.isActive=!1},updatePercent:function(e){this.precentElement&&this.precentElement.length&&this.precentElement.text(e+"%")},updateProcessed:function(e){this.processedElement&&this.processedElement.length&&this.processedElement.text(e)}};jQuery(document).ready((function(){e.init()}))})();