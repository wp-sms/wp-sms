import{r as n,t as ks,c as _s,j as e,S as ne,a as oe,R as oa,O as ke,P as ia,C as _e,b as la,X as Ee,T as De,D as Ae,d as Es,e as Ds,f as da,g as As,h as Os,i as Ts,k as Is,l as Ms,m as Ps,n as $s,o as te,L as Re,p as ge,q as Oe,U as Le,B as Be,s as be,u as je,M as ue,v as ca,G as ua,w as zs,x as Ls,N as Bs,y as Fs,z as Gs,A as Ws,E as Us,F as Hs,Z as qs,H as Vs,I as Ks,J as Xs,K as ma,Q as xa,V as Js,W as me,_ as P,Y as Ys,$ as Zs,a0 as fa,a1 as Qs,a2 as et,a3 as at,a4 as pa,a5 as Fe,a6 as ha,a7 as ga,a8 as ba,a9 as ja,aa as ya,ab as wa,ac as va,ad as Na,ae as Sa,af as Ca,ag as Ra,ah as ka,ai as _a,aj as Ea,ak as Ge,al as st,am as Da,an as tt,ao as Aa,ap as rt,aq as Oa,ar as Ta,as as nt,at as Ia,au as ot,av as Ma,aw as it,ax as Pa,ay as $a,az as lt,aA as dt,aB as za,aC as ct,aD as ut,aE as La,aF as Ba,aG as mt,aH as xt,aI as Fa,aJ as ft,aK as pt,aL as ht,aM as gt,aN as bt,aO as H,aP as Ga,aQ as jt,aR as Wa,aS as Ua,aT as Ha,aU as qa,aV as Va,aW as yt,aX as wt,aY as vt,aZ as Nt,a_ as St,a$ as Ct,b0 as Rt,b1 as kt}from"./vendor.js";const $e=768;function _t(){const[a,s]=n.useState(void 0);return n.useEffect(()=>{const t=window.matchMedia(`(max-width: ${$e-1}px)`),r=()=>{s(window.innerWidth<$e)};return t.addEventListener("change",r),s(window.innerWidth<$e),()=>t.removeEventListener("change",r)},[]),!!a}function u(...a){return ks(_s(a))}const We=oe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),F=n.forwardRef(({className:a,variant:s,size:t,asChild:r=!1,...l},i)=>{const c=r?ne:"button";return e.jsx(c,{className:u(We({variant:s,size:t,className:a})),ref:i,...l})});F.displayName="Button";const B=n.forwardRef(({className:a,type:s,...t},r)=>e.jsx("input",{type:s,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...t}));B.displayName="Input";const Ue=n.forwardRef(({className:a,orientation:s="horizontal",decorative:t=!0,...r},l)=>e.jsx(oa,{ref:l,decorative:t,orientation:s,className:u("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...r}));Ue.displayName=oa.displayName;const Et=Es,Dt=ia,Ka=n.forwardRef(({className:a,...s},t)=>e.jsx(ke,{className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t}));Ka.displayName=ke.displayName;const At=oe("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Xa=n.forwardRef(({side:a="right",className:s,children:t,...r},l)=>e.jsxs(Dt,{children:[e.jsx(Ka,{}),e.jsxs(_e,{ref:l,className:u(At({side:a}),s),...r,children:[e.jsxs(la,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),t]})]}));Xa.displayName=_e.displayName;const Ja=({className:a,...s})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",a),...s});Ja.displayName="SheetHeader";const Ya=n.forwardRef(({className:a,...s},t)=>e.jsx(De,{ref:t,className:u("text-lg font-semibold text-foreground",a),...s}));Ya.displayName=De.displayName;const Za=n.forwardRef(({className:a,...s},t)=>e.jsx(Ae,{ref:t,className:u("text-sm text-muted-foreground",a),...s}));Za.displayName=Ae.displayName;function sa({className:a,...s}){return e.jsx("div",{className:u("animate-pulse rounded-md bg-primary/10",a),...s})}const He=As,xe=Os,fe=Ts,re=n.forwardRef(({className:a,sideOffset:s=4,...t},r)=>e.jsx(Ds,{children:e.jsx(da,{ref:r,sideOffset:s,className:u("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...t})}));re.displayName=da.displayName;const Ot="sidebar_state",Tt=60*60*24*7,It="16rem",Mt="18rem",Pt="3rem",$t="b",Qa=n.createContext(null);function Te(){const a=n.useContext(Qa);if(!a)throw new Error("useSidebar must be used within a SidebarProvider.");return a}const es=n.forwardRef(({defaultOpen:a=!0,open:s,onOpenChange:t,className:r,style:l,children:i,...c},m)=>{const o=_t(),[f,x]=n.useState(!1),[w,j]=n.useState(a),v=s??w,R=n.useCallback(p=>{const h=typeof p=="function"?p(v):p;t?t(h):j(h),document.cookie=`${Ot}=${h}; path=/; max-age=${Tt}`},[t,v]),E=n.useCallback(()=>o?x(p=>!p):R(p=>!p),[o,R,x]);n.useEffect(()=>{const p=h=>{h.key===$t&&(h.metaKey||h.ctrlKey)&&(h.preventDefault(),E())};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[E]);const $=v?"expanded":"collapsed",g=n.useMemo(()=>({state:$,open:v,setOpen:R,isMobile:o,openMobile:f,setOpenMobile:x,toggleSidebar:E}),[$,v,R,o,f,x,E]);return e.jsx(Qa.Provider,{value:g,children:e.jsx(He,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":It,"--sidebar-width-icon":Pt,...l},className:u("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:m,...c,children:i})})})});es.displayName="SidebarProvider";const ye=n.forwardRef(({side:a="left",variant:s="sidebar",collapsible:t="offcanvas",className:r,children:l,...i},c)=>{const{isMobile:m,state:o,openMobile:f,setOpenMobile:x}=Te();return t==="none"?e.jsx("div",{className:u("flex h-[90%] w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:c,...i,children:l}):m?e.jsx(Et,{open:f,onOpenChange:x,...i,children:e.jsxs(Xa,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Mt},side:a,children:[e.jsxs(Ja,{className:"sr-only",children:[e.jsx(Ya,{children:"Sidebar"}),e.jsx(Za,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-[90%] w-full flex-col",children:l})]})}):e.jsxs("div",{ref:c,className:"group peer hidden text-sidebar-foreground md:block","data-state":o,"data-collapsible":o==="collapsed"?t:"","data-variant":s,"data-side":a,children:[e.jsx("div",{className:u("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:u("fixed inset-y-10 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",a==="left"?"group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-[90%] w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:l})})]})});ye.displayName="Sidebar";const zt=n.forwardRef(({className:a,onClick:s,...t},r)=>{const{toggleSidebar:l}=Te();return e.jsxs(F,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:u("h-7 w-7",a),onClick:i=>{s==null||s(i),l()},...t,children:[e.jsx(Is,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});zt.displayName="SidebarTrigger";const as=n.forwardRef(({className:a,...s},t)=>{const{toggleSidebar:r}=Te();return e.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:u("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",a),...s})});as.displayName="SidebarRail";const Lt=n.forwardRef(({className:a,...s},t)=>e.jsx("main",{ref:t,className:u("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...s}));Lt.displayName="SidebarInset";const Bt=n.forwardRef(({className:a,...s},t)=>e.jsx(B,{ref:t,"data-sidebar":"input",className:u("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",a),...s}));Bt.displayName="SidebarInput";const we=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"header",className:u("flex flex-col gap-2 p-2",a),...s}));we.displayName="SidebarHeader";const Ft=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"footer",className:u("flex flex-col gap-2 p-2",a),...s}));Ft.displayName="SidebarFooter";const Gt=n.forwardRef(({className:a,...s},t)=>e.jsx(Ue,{ref:t,"data-sidebar":"separator",className:u("mx-2 w-auto bg-sidebar-border",a),...s}));Gt.displayName="SidebarSeparator";const ve=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"content",className:u("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...s}));ve.displayName="SidebarContent";const Ne=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"group",className:u("relative flex w-full min-w-0 flex-col p-2",a),...s}));Ne.displayName="SidebarGroup";const Se=n.forwardRef(({className:a,asChild:s=!1,...t},r)=>{const l=s?ne:"div";return e.jsx(l,{ref:r,"data-sidebar":"group-label",className:u("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...t})});Se.displayName="SidebarGroupLabel";const Wt=n.forwardRef(({className:a,asChild:s=!1,...t},r)=>{const l=s?ne:"button";return e.jsx(l,{ref:r,"data-sidebar":"group-action",className:u("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...t})});Wt.displayName="SidebarGroupAction";const Ce=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"group-content",className:u("w-full text-sm",a),...s}));Ce.displayName="SidebarGroupContent";const X=n.forwardRef(({className:a,...s},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu",className:u("flex w-full min-w-0 flex-col gap-1",a),...s}));X.displayName="SidebarMenu";const J=n.forwardRef(({className:a,...s},t)=>e.jsx("li",{ref:t,"data-sidebar":"menu-item",className:u("group/menu-item relative",a),...s}));J.displayName="SidebarMenuItem";const Ut=oe("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Y=n.forwardRef(({asChild:a=!1,isActive:s=!1,variant:t="default",size:r="default",tooltip:l,className:i,...c},m)=>{const o=a?ne:"button",{isMobile:f,state:x}=Te(),w=e.jsx(o,{ref:m,"data-sidebar":"menu-button","data-size":r,"data-active":s,className:u(Ut({variant:t,size:r}),i),...c});return l?(typeof l=="string"&&(l={children:l}),e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:w}),e.jsx(re,{side:"right",align:"center",hidden:x!=="collapsed"||f,...l})]})):w});Y.displayName="SidebarMenuButton";const Ht=n.forwardRef(({className:a,asChild:s=!1,showOnHover:t=!1,...r},l)=>{const i=s?ne:"button";return e.jsx(i,{ref:l,"data-sidebar":"menu-action",className:u("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...r})});Ht.displayName="SidebarMenuAction";const qt=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:u("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...s}));qt.displayName="SidebarMenuBadge";const Vt=n.forwardRef(({className:a,showIcon:s=!1,...t},r)=>{const l=n.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:u("flex h-8 items-center gap-2 rounded-md px-2",a),...t,children:[s&&e.jsx(sa,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(sa,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":l}})]})});Vt.displayName="SidebarMenuSkeleton";const ss=n.forwardRef(({className:a,...s},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:u("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...s}));ss.displayName="SidebarMenuSub";const ts=n.forwardRef(({...a},s)=>e.jsx("li",{ref:s,...a}));ts.displayName="SidebarMenuSubItem";const rs=n.forwardRef(({asChild:a=!1,size:s="md",isActive:t,className:r,...l},i)=>{const c=a?ne:"a";return e.jsx(c,{ref:i,"data-sidebar":"menu-sub-button","data-size":s,"data-active":t,className:u("flex h-10 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",s==="sm"&&"text-xs",s==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...l})});rs.displayName="SidebarMenuSubButton";const Kt=Ms,Xt=Ps,Jt=$s,Yt=oe("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Z=n.forwardRef(({className:a,variant:s,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:u(Yt({variant:s}),a),...t}));Z.displayName="Alert";const Zt=n.forwardRef(({className:a,...s},t)=>e.jsx("h5",{ref:t,className:u("mb-1 font-medium leading-none tracking-tight",a),...s}));Zt.displayName="AlertTitle";const Q=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("text-sm [&_p]:leading-relaxed",a),...s}));Q.displayName="AlertDescription";function Qt(){const[a,s]=n.useState(null),[t,r]=n.useState(!0),[l,i]=n.useState(null);return n.useEffect(()=>{(async()=>{try{r(!0),i(null);const m=window.WP_SMS_DATA;if(!m)throw new Error("WP_SMS_DATA not available");const o=await fetch(`${m.restUrl}settings/schema/list`,{headers:{"X-WP-Nonce":m.nonce,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const f=await o.json();if(!f.success)throw new Error(f.message||"Failed to fetch schema");s(f.data)}catch(m){i(m instanceof Error?m.message:"An error occurred"),console.error("Failed to fetch schema:",m)}finally{r(!1)}})()},[]),{data:a,loading:t,error:l}}const er={contact_forms:ue,community_membership:je,ecommerce:be,learning_events:ua,booking_appointments:ca,support:Be,jobs:Le,contact_form_7:ue,gravityforms:ue,quform:ue,buddypress:je,ultimate_member:je,woocommerce:be,edd:be,awesome_support:Be,job_manager:Le},ar={Settings:te,Cog:Xs,MessageSquare:Ks,Send:Vs,Zap:qs,Star:Hs,Bell:Be,Mail:ue,Users:Le,MousePointer:Us,MessageCircle:Ws,Shield:Gs,Lock:Oe,ShoppingCart:be,UserCheck:je,GraduationCap:ua,Calendar:ca,BarChart3:Fs,Newspaper:Bs,BadgeCheck:Ls},ta=(a,s="size-4")=>{const t=ar[a]||te;return e.jsx(t,{className:s})};function sr({onGroupSelect:a,selectedGroup:s,...t}){const{data:r,loading:l,error:i}=Qt(),c=m=>{a&&a(m)};return l?e.jsxs(ye,{collapsible:"icon",...t,children:[e.jsx(we,{children:e.jsx(X,{children:e.jsx(J,{children:e.jsxs(Y,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(te,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Loading..."})]})]})})})}),e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(Re,{className:"h-6 w-6 animate-spin"})})})]}):i?e.jsxs(ye,{collapsible:"icon",...t,children:[e.jsx(we,{children:e.jsx(X,{children:e.jsx(J,{children:e.jsxs(Y,{size:"lg",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(te,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Error"})]})]})})})}),e.jsx(ve,{children:e.jsxs(Z,{variant:"destructive",className:"m-4",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsxs(Q,{children:["Failed to load menu: ",i]})]})})]}):r?e.jsxs(ye,{collapsible:"icon",...t,children:[e.jsx(we,{children:e.jsx(X,{children:e.jsx(J,{children:e.jsxs(Y,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(te,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"WP SMS"}),e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:"Admin Panel"})]})]})})})}),e.jsxs(ve,{children:[r.core&&Object.keys(r.core).length>0&&e.jsxs(Ne,{children:[e.jsx(Se,{children:"Core Settings"}),e.jsx(Ce,{children:e.jsx(X,{children:Object.entries(r.core).map(([m,o])=>e.jsx(J,{children:e.jsx(Y,{asChild:!0,tooltip:o.label,onClick:()=>c(m),className:s===m?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[ta(o.icon||"Settings"),e.jsx("span",{children:o.label})]})})},m))})})]}),r.addons&&Object.keys(r.addons).length>0&&e.jsxs(Ne,{children:[e.jsx(Se,{children:"Addons"}),e.jsx(Ce,{children:e.jsx(X,{children:Object.entries(r.addons).map(([m,o])=>e.jsx(J,{children:e.jsx(Y,{asChild:!0,tooltip:`${o.label} (Pro)`,onClick:()=>c(m),className:s===m?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsxs("button",{className:"flex items-center gap-2 w-full text-left",children:[ta(o.icon||"Shield"),e.jsx("span",{children:o.label}),e.jsx(Oe,{className:"size-3 text-orange-500 ml-auto"})]})})},m))})})]}),r.integrations&&r.integrations.children&&e.jsxs(Ne,{children:[e.jsx(Se,{children:r.integrations.label}),e.jsx(Ce,{children:e.jsx(X,{children:Object.entries(r.integrations.children).map(([m,o])=>{const f=er[m]||te;return"children"in o&&o.children?e.jsx(Kt,{className:"group/collapsible",children:e.jsxs(J,{children:[e.jsx(Xt,{asChild:!0,children:e.jsxs(Y,{tooltip:o.label,className:"flex items-center gap-2",children:[e.jsx(f,{className:"size-4"}),e.jsx("span",{children:o.label}),e.jsx(zs,{className:"ml-auto size-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(Jt,{children:e.jsx(ss,{children:Object.entries(o.children).map(([x,w])=>"name"in w?e.jsx(ts,{children:e.jsx(rs,{asChild:!0,onClick:()=>c(w.name),className:s===w.name?"bg-sidebar-accent text-sidebar-accent-foreground":"",children:e.jsx("button",{className:"w-full text-left",children:w.label})})},x):null)})})]})},m):null})})})]})]}),e.jsx(as,{})]}):null}const W=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",a),...s}));W.displayName="Card";const K=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...s}));K.displayName="CardHeader";const ee=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("font-semibold leading-none tracking-tight",a),...s}));ee.displayName="CardTitle";const pe=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("text-sm text-muted-foreground",a),...s}));pe.displayName="CardDescription";const q=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("p-6 pt-0",a),...s}));q.displayName="CardContent";const tr=n.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...s}));tr.displayName="CardFooter";const rr=oe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=n.forwardRef(({className:a,...s},t)=>e.jsx(ma,{ref:t,className:u(rr(),a),...s}));O.displayName=ma.displayName;const qe=n.forwardRef(({className:a,...s},t)=>e.jsx("textarea",{className:u("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s}));qe.displayName="Textarea";const ns=n.forwardRef(({className:a,...s},t)=>e.jsx(xa,{ref:t,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:e.jsx(Js,{className:u("flex items-center justify-center text-current"),children:e.jsx(me,{className:"h-4 w-4"})})}));ns.displayName=xa.displayName;const nr=oe("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M({className:a,variant:s,...t}){return e.jsx("div",{className:u(nr({variant:s}),a),...t})}const or=ia,os=n.forwardRef(({className:a,...s},t)=>e.jsx(ke,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s}));os.displayName=ke.displayName;const ir=n.forwardRef(({className:a,children:s,...t},r)=>e.jsxs(or,{children:[e.jsx(os,{}),e.jsxs(_e,{ref:r,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t,children:[s,e.jsxs(la,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ir.displayName=_e.displayName;const lr=n.forwardRef(({className:a,...s},t)=>e.jsx(De,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",a),...s}));lr.displayName=De.displayName;const dr=n.forwardRef(({className:a,...s},t)=>e.jsx(Ae,{ref:t,className:u("text-sm text-muted-foreground",a),...s}));dr.displayName=Ae.displayName;const Ve=n.forwardRef(({className:a,...s},t)=>e.jsx(P,{ref:t,className:u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s}));Ve.displayName=P.displayName;const Ke=n.forwardRef(({className:a,...s},t)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Ys,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(P.Input,{ref:t,className:u("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]}));Ke.displayName=P.Input.displayName;const Xe=n.forwardRef(({className:a,...s},t)=>e.jsx(P.List,{ref:t,className:u("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s}));Xe.displayName=P.List.displayName;const Je=n.forwardRef((a,s)=>e.jsx(P.Empty,{ref:s,className:"py-6 text-center text-sm",...a}));Je.displayName=P.Empty.displayName;const ae=n.forwardRef(({className:a,...s},t)=>e.jsx(P.Group,{ref:t,className:u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s}));ae.displayName=P.Group.displayName;const cr=n.forwardRef(({className:a,...s},t)=>e.jsx(P.Separator,{ref:t,className:u("-mx-1 h-px bg-border",a),...s}));cr.displayName=P.Separator.displayName;const se=n.forwardRef(({className:a,...s},t)=>e.jsx(P.Item,{ref:t,className:u("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...s}));se.displayName=P.Item.displayName;const is=Qs,ls=et,Ye=n.forwardRef(({className:a,align:s="center",sideOffset:t=4,...r},l)=>e.jsx(Zs,{children:e.jsx(fa,{ref:l,align:s,sideOffset:t,className:u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}));Ye.displayName=fa.displayName;function ze({options:a,value:s,onValueChange:t,placeholder:r="Select an option...",searchPlaceholder:l="Search options...",emptyText:i="No options found.",className:c}){const[m,o]=n.useState(!1),f=!Array.isArray(a)&&Object.values(a).some(j=>typeof j=="object"),w=(()=>{if(!s)return"";if(Array.isArray(a)){const j=a.find(v=>v.value===s||Object.keys(v)[0]===s);return j?j.label||Object.values(j)[0]:""}if(f){for(const[j,v]of Object.entries(a))if(typeof v=="object"){for(const[R,E]of Object.entries(v))if(R===s)return E}}else return a[s]||"";return""})();return e.jsxs(is,{open:m,onOpenChange:o,children:[e.jsx(ls,{asChild:!0,children:e.jsxs(F,{variant:"outline",role:"combobox","aria-expanded":m,className:u("w-full justify-between",c),children:[w||r,e.jsx(at,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ye,{className:"w-full p-0",align:"start",children:e.jsxs(Ve,{children:[e.jsx(Ke,{placeholder:l}),e.jsxs(Xe,{children:[e.jsx(Je,{children:i}),f?Object.entries(a).map(([j,v])=>typeof v=="object"?e.jsx(ae,{heading:j,children:Object.entries(v).map(([R,E])=>e.jsxs(se,{value:R,onSelect:$=>{t($===s?"":$),o(!1)},children:[e.jsx(me,{className:u("mr-2 h-4 w-4",s===R?"opacity-100":"opacity-0")}),E]},R))},j):null):Array.isArray(a)?e.jsx(ae,{children:a.map(j=>{const v=j.value||Object.keys(j)[0],R=j.label||Object.values(j)[0];return e.jsxs(se,{value:v,onSelect:E=>{t(E===s?"":E),o(!1)},children:[e.jsx(me,{className:u("mr-2 h-4 w-4",s===v?"opacity-100":"opacity-0")}),R]},v)})}):e.jsx(ae,{children:Object.entries(a).map(([j,v])=>e.jsxs(se,{value:j,onSelect:R=>{t(R===s?"":R),o(!1)},children:[e.jsx(me,{className:u("mr-2 h-4 w-4",s===j?"opacity-100":"opacity-0")}),v]},j))})]})]})})]})}function ur({item:a,idx:s,onRemove:t,listeners:r,attributes:l,isDragging:i,transform:c,transition:m}){return e.jsxs(M,{variant:"secondary",className:`mr-1 mb-1 flex items-center cursor-move ${i?"opacity-50":""}`,style:{transform:Na.Transform.toString(c),transition:m},...l,...r,children:[a.label,e.jsx("button",{type:"button",className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:o=>{o.key==="Enter"&&t(a.value)},onMouseDown:o=>{o.preventDefault(),o.stopPropagation()},onClick:()=>t(a.value),children:e.jsx(Ee,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},a.value)}function ra({options:a,value:s=[],onValueChange:t,placeholder:r="Select options...",searchPlaceholder:l="Search options...",emptyText:i="No options found.",className:c,sortable:m=!1}){const[o,f]=n.useState(!1),x=!Array.isArray(a)&&Object.values(a).some(g=>typeof g=="object"),w=g=>{if(Array.isArray(a)){const p=a.find(h=>h.value===g||Object.keys(h)[0]===g);return p?p.label||Object.values(p)[0]:g}if(x){for(const[p,h]of Object.entries(a))if(typeof h=="object"){for(const[y,G]of Object.entries(h))if(y===g)return G}}else return a[g]||g;return g},j=g=>{const p=s.includes(g)?s.filter(h=>h!==g):[...s,g];t(p)},v=g=>{t(s.filter(p=>p!==g))},R=pa(Fe(wa)),E=g=>{const{active:p,over:h}=g;if(p.id!==(h==null?void 0:h.id)){const y=s.indexOf(p.id),G=s.indexOf(h==null?void 0:h.id);y!==-1&&G!==-1&&t(ya(s,y,G))}},$=s.map(g=>({value:g,label:w(g)}));return e.jsx("div",{className:u("w-full",c),children:e.jsxs(is,{open:o,onOpenChange:f,children:[e.jsx(ls,{asChild:!0,children:e.jsx(F,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between h-auto min-h-9 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1 flex-1",children:$.length>0?m?e.jsx(ha,{sensors:R,collisionDetection:ga,onDragEnd:E,children:e.jsx(ba,{items:s,strategy:ja,children:$.map((g,p)=>e.jsx(mr,{id:g.value,item:g,idx:p,onRemove:v},g.value))})}):$.map((g,p)=>e.jsxs(M,{variant:"secondary",className:"mr-1 mb-1 flex items-center",children:[g.label,e.jsx("button",{type:"button",className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:h=>{h.key==="Enter"&&v(g.value)},onMouseDown:h=>{h.preventDefault(),h.stopPropagation()},onClick:()=>v(g.value),children:e.jsx(Ee,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},g.value)):e.jsx("span",{className:"text-muted-foreground",children:r})})})}),e.jsx(Ye,{className:"w-full p-0",align:"start",children:e.jsxs(Ve,{children:[e.jsx(Ke,{placeholder:l}),e.jsxs(Xe,{children:[e.jsx(Je,{children:i}),x?Object.entries(a).map(([g,p])=>typeof p=="object"?e.jsx(ae,{heading:g,children:Object.entries(p).map(([h,y])=>e.jsxs(se,{onSelect:()=>j(h),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s.includes(h)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:s.includes(h)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),y]},h))},g):null):Array.isArray(a)?e.jsx(ae,{children:a.map(g=>{const p=g.value||Object.keys(g)[0],h=g.label||Object.values(g)[0];return e.jsxs(se,{onSelect:()=>j(p),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s.includes(p)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:s.includes(p)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),h]},p)})}):e.jsx(ae,{children:Object.entries(a).map(([g,p])=>e.jsxs(se,{onSelect:()=>j(g),children:[e.jsx("div",{className:u("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s.includes(g)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:s.includes(g)&&e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p]},g))})]})]})})]})})}function mr({id:a,item:s,idx:t,onRemove:r}){const{attributes:l,listeners:i,setNodeRef:c,transform:m,transition:o,isDragging:f}=va({id:a});return e.jsx("span",{ref:c,style:{display:"inline-block"},children:e.jsx(ur,{item:s,idx:t,onRemove:r,listeners:i,attributes:l,isDragging:f,transform:m,transition:o})})}function I({content:a,className:s}){return a?e.jsx("div",{className:u("text-sm text-muted-foreground [&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",s),dangerouslySetInnerHTML:{__html:a}}):null}const xr={new:{label:"New",color:"bg-green-100 text-green-800",icon:Ea},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:_a},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:ka},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:Ra},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:Ca},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:Sa}};function fr({section:a,children:s}){const t=a.tag?xr[a.tag]:null,r=t==null?void 0:t.icon,l=()=>{switch(a.layout){case"2-column":return"grid grid-cols-1 md:grid-cols-2 gap-6";case"3-column":return"grid grid-cols-1 md:grid-cols-3 gap-6";default:return"space-y-6"}};return e.jsxs(W,{className:`mb-6 ${a.readonly?"opacity-60 pointer-events-none":""}`,children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:"text-xl",children:a.title}),a.readonly&&e.jsx(M,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Read Only"}),t&&e.jsxs(M,{variant:"secondary",className:t.color,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})]}),a.subtitle&&e.jsx(pe,{className:"text-base",children:a.subtitle})]}),a.helpUrl&&!a.readonly&&e.jsx(F,{variant:"ghost",size:"sm",asChild:!0,className:"flex-shrink-0",children:e.jsxs("a",{href:a.helpUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Help"}),e.jsx(st,{className:"w-3 h-3"})]})})]})}),e.jsx(q,{children:e.jsx("div",{className:l(),children:s})})]})}const pr={new:{label:"New",color:"bg-green-100 text-green-800",icon:Ea},deprecated:{label:"Deprecated",color:"bg-red-100 text-red-800",icon:_a},beta:{label:"Beta",color:"bg-yellow-100 text-yellow-800",icon:ka},pro:{label:"Pro",color:"bg-purple-100 text-purple-800",icon:Ra},experimental:{label:"Experimental",color:"bg-orange-100 text-orange-800",icon:Ca},"coming-soon":{label:"Coming Soon",color:"bg-blue-100 text-blue-800",icon:Sa}};function L({tag:a,className:s=""}){const t=pr[a];if(!t)return null;const r=t.icon;return e.jsxs(M,{variant:"secondary",className:`${t.color} ${s}`,children:[r&&e.jsx(r,{className:"w-3 h-3 mr-1"}),t.label]})}function hr(a){const[s,t]=n.useState([]),[r,l]=n.useState(!1),[i,c]=n.useState(null);return n.useEffect(()=>{(async()=>{if(!a||a==="default"){t([]);return}try{l(!0),c(null);const o=window.WP_SMS_DATA;if(!o)throw new Error("WP_SMS_DATA not available");const f=await fetch(`${o.restUrl}gateways/fields/${a}`,{headers:{"X-WP-Nonce":o.nonce,"Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const x=await f.json();if(!x.success)throw new Error(x.message||"Failed to fetch gateway fields");t(x.data)}catch(o){c(o instanceof Error?o.message:"An error occurred"),console.error("Failed to fetch gateway fields:",o)}finally{l(!1)}})()},[a]),{data:s,loading:r,error:i}}function Ie({label:a,description:s,tooltip:t,isPro:r=!1,isRequired:l=!1,isLocked:i=!1,children:c,htmlFor:m}){return e.jsx(He,{children:e.jsxs("div",{className:`space-y-2 ${i?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{htmlFor:m,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${i?"text-muted-foreground":""}`,children:[a,l&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),i&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),t&&!i&&e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(re,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&!i&&e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:e.jsxs(M,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Oe,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(re,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),e.jsx("div",{className:i?"pointer-events-none":"",children:c}),s&&e.jsx("p",{className:`text-sm leading-relaxed ${i?"text-muted-foreground opacity-70":"text-muted-foreground"}`,children:s})]})})}const gr=n.forwardRef(({className:a,...s},t)=>e.jsx(Da,{className:u("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:e.jsx(tt,{className:u("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));gr.displayName=Da.displayName;const ds=ct,cs=ut,Ze=n.forwardRef(({className:a,children:s,...t},r)=>e.jsxs(Aa,{ref:r,className:u("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[s,e.jsx(rt,{asChild:!0,children:e.jsx(Oa,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=Aa.displayName;const us=n.forwardRef(({className:a,...s},t)=>e.jsx(Ta,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(nt,{className:"h-4 w-4"})}));us.displayName=Ta.displayName;const ms=n.forwardRef(({className:a,...s},t)=>e.jsx(Ia,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(Oa,{className:"h-4 w-4"})}));ms.displayName=Ia.displayName;const Qe=n.forwardRef(({className:a,children:s,position:t="popper",...r},l)=>e.jsx(ot,{children:e.jsxs(Ma,{ref:l,className:u("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...r,children:[e.jsx(us,{}),e.jsx(it,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(ms,{})]})}));Qe.displayName=Ma.displayName;const br=n.forwardRef(({className:a,...s},t)=>e.jsx(Pa,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",a),...s}));br.displayName=Pa.displayName;const ea=n.forwardRef(({className:a,children:s,...t},r)=>e.jsxs($a,{ref:r,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(lt,{children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsx(dt,{children:s})]}));ea.displayName=$a.displayName;const jr=n.forwardRef(({className:a,...s},t)=>e.jsx(za,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...s}));jr.displayName=za.displayName;const yr=n.forwardRef(({className:a,...s},t)=>e.jsx(La,{className:u("grid gap-2",a),...s,ref:t}));yr.displayName=La.displayName;const wr=n.forwardRef(({className:a,...s},t)=>e.jsx(Ba,{ref:t,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(mt,{className:"flex items-center justify-center",children:e.jsx(xt,{className:"h-3.5 w-3.5 fill-primary"})})}));wr.displayName=Ba.displayName;const vr=n.forwardRef(({className:a,...s},t)=>e.jsxs(Fa,{ref:t,className:u("relative flex w-full touch-none select-none items-center",a),...s,children:[e.jsx(ft,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(pt,{className:"absolute h-full bg-primary"})}),e.jsx(ht,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));vr.displayName=Fa.displayName;function Nr({label:a,value:s,placeholder:t,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,onChange:o}){return e.jsx(Ie,{label:a,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,children:e.jsx(B,{value:s,placeholder:t,onChange:f=>o==null?void 0:o(f.target.value),disabled:m,className:"w-full"})})}function Sr({label:a,value:s,placeholder:t,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,onChange:o}){const[f,x]=n.useState(!1);return e.jsx(Ie,{label:a,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{type:f?"text":"password",value:s,placeholder:t,onChange:w=>o==null?void 0:o(w.target.value),disabled:m,className:"w-full pr-10"}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!f),disabled:m,children:f?e.jsx(gt,{className:"h-4 w-4"}):e.jsx(bt,{className:"h-4 w-4"})})]})})}function Cr({label:a,value:s,placeholder:t,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,rows:o=3,onChange:f}){return e.jsx(Ie,{label:a,description:r,tooltip:l,isPro:i,isRequired:c,isLocked:m,children:e.jsx(qe,{value:s,placeholder:t,rows:o,onChange:x=>f==null?void 0:f(x.target.value),disabled:m,className:"w-full resize-none"})})}function Rr({label:a,value:s,placeholder:t,options:r,description:l,tooltip:i,isPro:c,isRequired:m,isLocked:o,onChange:f}){return e.jsx(Ie,{label:a,description:l,tooltip:i,isPro:c,isRequired:m,isLocked:o,children:e.jsxs(ds,{value:s,onValueChange:f,disabled:o,children:[e.jsx(Ze,{className:"w-full",children:e.jsx(cs,{placeholder:t})}),e.jsx(Qe,{children:r.map(x=>e.jsx(ea,{value:x.value,children:x.label},x.value))})]})})}function kr({gatewayName:a,formData:s,onFieldChange:t}){const{data:r,loading:l,error:i}=hr(a);return H.useEffect(()=>{r&&r.length>0&&r.forEach(c=>{c.id in s||t(c.id,"")})},[r,s,t]),l?e.jsx(W,{children:e.jsxs(q,{className:"flex items-center justify-center py-8",children:[e.jsx(Re,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading gateway fields..."})]})}):i?e.jsx(W,{children:e.jsx(q,{className:"py-4",children:e.jsx(Z,{variant:"destructive",children:e.jsxs(Q,{children:["Failed to load gateway fields: ",i]})})})}):!r||r.length===0?null:e.jsxs(W,{children:[e.jsxs(K,{children:[e.jsx(ee,{children:"Gateway Configuration"}),e.jsx(pe,{children:"Configure the specific settings for your selected gateway."})]}),e.jsx(q,{className:"space-y-6",children:r.map(c=>{const m=s[c.id]||"";switch(c.type){case"select":return e.jsx(Rr,{label:c.name,value:m,description:c.desc,options:c.options?Object.entries(c.options).map(([o,f])=>({value:o,label:f})):[],onChange:o=>t(c.id,o)},c.id);case"textarea":return e.jsx(Cr,{label:c.name,value:m,description:c.desc,onChange:o=>t(c.id,o)},c.id);case"password":return e.jsx(Sr,{label:c.name,value:m,description:c.desc,onChange:o=>t(c.id,o)},c.id);default:return e.jsx(Nr,{label:c.name,value:m,description:c.desc,onChange:o=>t(c.id,o)},c.id)}})})]})}function _r(a){const s=n.useRef(null),t=n.useRef(null);a!==s.current&&(s.current=a,t.current=a);const r=n.useCallback((m,o)=>{t.current&&(t.current={...t.current,[m]:o})},[]),l=n.useCallback(()=>{if(!s.current||!t.current)return{};const m={};return Object.keys(t.current).forEach(o=>{const f=s.current[o],x=t.current[o];Array.isArray(x)&&Array.isArray(f)?JSON.stringify(x)!==JSON.stringify(f)&&(m[o]=x):x!==f&&(m[o]=x)}),m},[]),i=n.useCallback(()=>Object.keys(l()).length>0,[l]),c=n.useCallback(()=>{t.current=s.current},[]);return{updateValue:r,getChangedFields:l,hasChanges:i,resetChanges:c}}class xs extends Error{constructor(s,t){super(s),this.fields=t,this.name="ValidationError"}}class Er{async saveSettings(s){try{const t=window.WP_SMS_DATA,r=`${t.restUrl}settings/save`;console.log("Saving settings to:",r);const l=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},body:JSON.stringify(s)}),i=await l.json();if(!l.ok)if(l.status===422){const c=i;throw new xs(c.message,c.data.fields)}else{const c=i;throw new Error(c.message||"Failed to save settings")}return i}catch(t){throw t instanceof Error?t:new Error("Network error occurred while saving settings")}}}const Dr=new Er,Ar=yt,Or=jt,fs=n.forwardRef(({className:a,...s},t)=>e.jsx(Ga,{className:u("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t}));fs.displayName=Ga.displayName;const ps=n.forwardRef(({className:a,...s},t)=>e.jsxs(Or,{children:[e.jsx(fs,{}),e.jsx(Wa,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));ps.displayName=Wa.displayName;const hs=({className:a,...s})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",a),...s});hs.displayName="AlertDialogHeader";const gs=({className:a,...s})=>e.jsx("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});gs.displayName="AlertDialogFooter";const bs=n.forwardRef(({className:a,...s},t)=>e.jsx(Ua,{ref:t,className:u("text-lg font-semibold",a),...s}));bs.displayName=Ua.displayName;const js=n.forwardRef(({className:a,...s},t)=>e.jsx(Ha,{ref:t,className:u("text-sm text-muted-foreground",a),...s}));js.displayName=Ha.displayName;const ys=n.forwardRef(({className:a,...s},t)=>e.jsx(qa,{ref:t,className:u(We(),a),...s}));ys.displayName=qa.displayName;const ws=n.forwardRef(({className:a,...s},t)=>e.jsx(Va,{ref:t,className:u(We({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));ws.displayName=Va.displayName;function Tr({id:a,index:s,isLocked:t,canRemove:r,onRemove:l,children:i}){const[c,m]=n.useState(!1),{attributes:o,listeners:f,setNodeRef:x,transform:w,transition:j,isDragging:v}=va({id:a,disabled:t}),R={transform:Na.Transform.toString(w),transition:j},E=()=>{l(),m(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{ref:x,style:R,className:`relative transition-all duration-200 ${v?"opacity-50 scale-105 shadow-lg z-50":""} ${t?"cursor-not-allowed":""}`,children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{...o,...f,className:`flex items-center justify-center w-6 h-6 rounded ${t?"cursor-not-allowed opacity-50":"cursor-grab active:cursor-grabbing hover:bg-muted"}`,"aria-label":"Drag to reorder",children:e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("span",{className:"text-sm font-medium",children:["Item ",s+1]})]}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",disabled:!r||t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:()=>m(!0),children:e.jsx(Ct,{className:"h-4 w-4"})})]})}),e.jsx(q,{className:"pt-0",children:i})]}),e.jsx(Ar,{open:c,onOpenChange:m,children:e.jsxs(ps,{children:[e.jsxs(hs,{children:[e.jsx(bs,{children:"Delete Item"}),e.jsxs(js,{children:["Are you sure you want to delete Item ",s+1,"? This action cannot be undone."]})]}),e.jsxs(gs,{children:[e.jsx(ws,{children:"Cancel"}),e.jsx(ys,{onClick:E,children:"Delete"})]})]})})]})}function Ir({label:a,description:s,tooltip:t,isPro:r=!1,isLocked:l=!1,minItems:i=0,maxItems:c=10,addButtonText:m="Add Item",children:o,value:f=[{}],onChange:x}){const[w,j]=n.useState(()=>f.map((p,h)=>({...p,id:p.id||`item-${Date.now()}-${h}`})));n.useEffect(()=>{j(f.map((p,h)=>({...p,id:p.id||`item-${Date.now()}-${h}`})))},[f]);const v=pa(Fe(wa,{activationConstraint:{distance:8}}),Fe(Nt,{coordinateGetter:vt})),R=()=>{if(w.length<c){const p={id:`item-${Date.now()}`},h=[...w,p];j(h),x==null||x(h)}},E=p=>{if(w.length>i){const h=w.filter((y,G)=>G!==p);j(h),x==null||x(h)}},$=(p,h)=>{const y=[...w];y[p]={...y[p],...h},j(y),x==null||x(y)},g=p=>{const{active:h,over:y}=p;if(h.id!==(y==null?void 0:y.id)){const G=w.findIndex(ie=>ie.id===h.id),Me=w.findIndex(ie=>ie.id===(y==null?void 0:y.id)),T=ya(w,G,Me);j(T),x==null||x(T)}};return e.jsx(He,{children:e.jsxs("div",{className:`space-y-4 ${l?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"text-sm font-medium leading-none",children:a}),t&&e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(re,{children:e.jsx("p",{className:"max-w-xs",children:t})})]}),r&&e.jsxs(xe,{children:[e.jsx(fe,{asChild:!0,children:e.jsxs(M,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 hover:bg-orange-200",children:[e.jsx(Oe,{className:"mr-1 h-3 w-3"}),"Pro"]})}),e.jsx(re,{children:e.jsx("p",{children:"This feature requires WP SMS Pro"})})]})]}),s&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s}),e.jsx("div",{className:`space-y-3 ${l?"pointer-events-none":""}`,children:e.jsx(ha,{sensors:v,collisionDetection:ga,onDragEnd:g,children:e.jsx(ba,{items:w.map(p=>p.id),strategy:ja,children:w.map((p,h)=>e.jsx(Tr,{id:p.id,index:h,isLocked:l,canRemove:w.length>i,onRemove:()=>E(h),children:o(h,y=>$(h,y),()=>E(h))},p.id))})})}),e.jsxs(F,{type:"button",variant:"outline",onClick:R,disabled:w.length>=c||l,className:"w-full",children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),m]}),w.length>=c&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum ",c," items allowed"]})]})})}function Mr(a,s){if(a.showIf){for(const[t,r]of Object.entries(a.showIf))if(s[t]!==r)return!1}if(a.hideIf){for(const[t,r]of Object.entries(a.hideIf))if(s[t]===r)return!1}return!0}function ce(a,s){if(!a.options_depends_on)return a.options;const t=a.options_depends_on,r=s[t];if(!r||r.length===0)return a.options;if(Array.isArray(a.options))return a.options.filter(i=>r.includes(i.value??Object.keys(i)[0]));const l={};return Object.entries(a.options).forEach(([i,c])=>{r.includes(i)&&(l[i]=c)}),l}function Pr(){const a=t=>{if(typeof window<"u"&&window.wp&&window.wp.media)try{const r=window.wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1});r.on("select",()=>{const l=r.state().get("selection").first().toJSON();t(l.url)}),r.open()}catch(r){console.error("Error opening WordPress media uploader:",r),s(t)}else console.warn("WordPress media uploader not available, using fallback"),s(t)},s=t=>{const r=document.createElement("input");r.type="file",r.accept="image/*",r.style.display="none",r.onchange=l=>{var c;const i=(c=l.target.files)==null?void 0:c[0];if(i){const m=URL.createObjectURL(i);t(m),setTimeout(()=>URL.revokeObjectURL(m),1e3)}document.body.contains(r)&&document.body.removeChild(r)},document.body.appendChild(r),r.click()};return{openMediaUploader:a}}function $r({schema:a,savedValues:s,loading:t,error:r,onSaveSuccess:l}){const[i,c]=H.useState({}),[m,o]=H.useState(!1),[f,x]=H.useState(null),[w,j]=H.useState({}),[v,R]=H.useState(!1),{updateValue:E,getChangedFields:$,hasChanges:g,resetChanges:p}=_r(s),{openMediaUploader:h}=Pr();H.useEffect(()=>{if(a){const b={};a.sections.forEach(d=>{d.fields.forEach(D=>{b[D.key]=(s==null?void 0:s[D.key])??D.default})}),s&&Object.keys(s).forEach(d=>{d in b||(b[d]=s[d])}),c(b)}},[a,s]),H.useEffect(()=>{R(!1),x(null),j({})},[a]);const y=(b,d)=>{c(D=>({...D,[b]:d})),E(b,d),x(null),j(D=>{const _={...D};return delete _[b],_}),R(!1)},G=async()=>{if(g()){o(!0),x(null),j({}),R(!1);try{const b=$();(await Dr.saveSettings(b)).success&&(R(!0),p(),l&&l(Object.keys(b)),window.scrollTo({top:0,behavior:"smooth"}))}catch(b){b instanceof xs?(j(b.fields),x(b.message)):x(b instanceof Error?b.message:"Failed to save settings")}finally{o(!1)}}},Me=()=>{if(a){const b={};a.sections.forEach(d=>{d.fields.forEach(D=>{b[D.key]=(s==null?void 0:s[D.key])??D.default})}),s&&Object.keys(s).forEach(d=>{d in b||(b[d]=s[d])}),c(b),p(),x(null),j({}),R(!1)}},T=b=>{const d=w[b];return d?e.jsx("p",{className:"text-sm text-destructive mt-1",children:d}):null},ie=b=>{if(!Mr(b,i))return null;const{key:d,type:D,label:_,description:N,options:Fr,tag:k,readonly:S}=b,Ns=(()=>{switch(D){case"header":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ue,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:_}),N&&e.jsx(I,{content:N})]});case"notice":return e.jsxs(Z,{className:"border-blue-200 bg-blue-50 text-blue-800",children:[e.jsx(ge,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Q,{className:"text-blue-800",children:[e.jsx("div",{className:"font-medium",children:_}),N&&e.jsx("div",{className:"mt-1 text-sm",dangerouslySetInnerHTML:{__html:N}})]})]});case"text":return e.jsxs("div",{className:`space-y-2 ${S?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),e.jsx(B,{id:d,value:i[d]||"",onChange:C=>y(d,C.target.value),disabled:S}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"textarea":return e.jsxs("div",{className:`space-y-2 ${S?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),e.jsx(qe,{id:d,value:i[d]||"",onChange:C=>y(d,C.target.value),disabled:S}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"number":return e.jsxs("div",{className:`space-y-2 ${S?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),e.jsx(B,{id:d,type:"number",value:i[d]||"",onChange:C=>y(d,C.target.value),placeholder:N,disabled:S}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"checkbox":return e.jsxs("div",{className:`flex items-center space-x-2 ${S?"opacity-50":""}`,children:[e.jsx(ns,{id:d,checked:i[d]||!1,onCheckedChange:C=>y(d,C),disabled:S}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"select":const Ss=ce(b,i);return e.jsxs("div",{className:`space-y-2 ${S?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),e.jsx(ze,{options:Ss,value:i[d]||"",onValueChange:C=>y(d,C),placeholder:"Select an option",searchPlaceholder:"Search options..."}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"advancedselect":return e.jsxs("div",{className:`space-y-2 ${S?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,className:S?"text-muted-foreground":"",children:_}),S&&e.jsx(M,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:"Read Only"}),k&&e.jsx(L,{tag:k})]}),e.jsx(ze,{options:ce(b,i),value:i[d]||"",onValueChange:C=>y(d,C),placeholder:"Select an option",searchPlaceholder:"Search options..."}),N&&e.jsx("div",{className:S?"opacity-70":"",children:e.jsx(I,{content:N})}),T(d)]});case"countryselect":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:d,children:_}),e.jsx(ze,{options:ce(b,i),value:i[d]||"",onValueChange:C=>y(d,C),placeholder:"Select a country",searchPlaceholder:"Search countries..."}),N&&e.jsx(I,{content:N}),T(d)]},d);case"multiselect":const Cs=ce(b,i);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsx(ra,{options:Cs,value:Array.isArray(i[d])?i[d]:[],onValueChange:C=>y(d,C),placeholder:"Select options",searchPlaceholder:"Search options...",sortable:b.sortable}),N&&e.jsx(I,{content:N}),T(d)]});case"advancedmultiselect":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsx(ra,{options:ce(b,i),value:Array.isArray(i[d])?i[d]:[],onValueChange:C=>y(d,C),placeholder:"Select options",searchPlaceholder:"Search options...",sortable:b.sortable}),N&&e.jsx(I,{content:N}),T(d)]});case"html":return e.jsxs("div",{className:"space-y-2",children:[_&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsx("div",{className:"[&_code]:bg-muted [&_code]:px-1 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-xs [&_br]:block [&_br]:mb-2",dangerouslySetInnerHTML:{__html:i[d]||""}}),N&&e.jsx(I,{content:N}),T(d)]});case"repeater":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsx(Ir,{label:"",description:"",value:Array.isArray(i[d])?i[d]:[],onChange:C=>y(d,C),addButtonText:`Add ${_}`,children:(C,he,Gr)=>{var aa;const le=((aa=i[d])==null?void 0:aa[C])||{},Rs=b.fieldGroups||[];return e.jsx("div",{className:"space-y-4",children:Rs.map(V=>e.jsxs("div",{className:"space-y-4",children:[V.label&&e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:V.label}),V.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:V.description}),e.jsx("div",{className:`grid gap-4 ${V.layout==="2-column"?"grid-cols-1 md:grid-cols-2":V.layout==="3-column"?"grid-cols-1 md:grid-cols-3":"grid-cols-1"}`,children:V.fields.map(A=>{const Pe=`${d}[${C}][${A.key}]`,de=le[A.key]||"";return e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:Pe,children:A.label}),A.type==="text"&&e.jsx(B,{id:Pe,value:de,onChange:z=>{const U={...le,[A.key]:z.target.value};he(U)},placeholder:A.placeholder||""}),A.type==="select"&&e.jsxs(ds,{value:de,onValueChange:z=>{const U={...le,[A.key]:z};he(U)},children:[e.jsx(Ze,{children:e.jsx(cs,{placeholder:A.placeholder||"Select an option"})}),e.jsx(Qe,{children:Object.entries(A.options||{}).map(([z,U])=>e.jsx(ea,{value:z,children:U},z))})]}),A.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{id:Pe,value:de,onChange:z=>{const U={...le,[A.key]:z.target.value};he(U)},placeholder:A.placeholder||"Image URL"}),e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>{h(z=>{const U={...le,[A.key]:z};he(U)})},children:"Upload"})]}),de&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:de,alt:"Preview",className:"max-w-full h-20 object-cover rounded border",onError:z=>{z.currentTarget.style.display="none"}})})]}),A.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:A.description})]},A.key)})})]},V.key))})}}),N&&e.jsx(I,{content:N}),T(d)]});case"color":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{type:"color",value:i[d]||"#ff6b35",onChange:C=>y(d,C.target.value),disabled:S,className:"w-12 h-10 p-1 border rounded cursor-pointer"}),e.jsx(B,{type:"text",value:i[d]||"",onChange:C=>y(d,C.target.value),disabled:S,className:"flex-1",placeholder:"#ff6b35"})]}),N&&e.jsx(I,{content:N}),T(d)]});default:return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:d,children:_}),k&&e.jsx(L,{tag:k})]}),e.jsx(B,{id:d,value:i[d]||"",onChange:C=>y(d,C.target.value),placeholder:`Unsupported field type: ${D}`,disabled:!0}),N&&e.jsx(I,{content:N}),T(d)]})}})();return e.jsx("div",{children:Ns},d)};if(t)return e.jsxs(W,{children:[e.jsx(K,{children:e.jsx(ee,{children:"Loading..."})}),e.jsx(q,{children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Re,{className:"h-8 w-8 animate-spin"})})})]});if(r)return e.jsxs(W,{children:[e.jsx(K,{children:e.jsx(ee,{children:"Error"})}),e.jsx(q,{children:e.jsxs(Z,{variant:"destructive",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx(Q,{children:r})]})})]});if(!a)return e.jsx(W,{children:e.jsxs(K,{children:[e.jsx(ee,{children:"No Settings Selected"}),e.jsx(pe,{children:"Please select a settings group from the sidebar to view its configuration options."})]})});const vs=a.label.toLowerCase().includes("gateway")||a.sections.some(b=>b.title.toLowerCase().includes("gateway")||b.fields.some(d=>d.key==="gateway_name"));return e.jsxs(W,{children:[e.jsxs(K,{children:[e.jsx(ee,{children:a.label}),e.jsxs(pe,{children:["Configure settings for ",a.label.toLowerCase()]})]}),e.jsx(q,{children:e.jsxs("form",{className:"space-y-6",onSubmit:b=>{b.preventDefault(),G()},children:[f&&e.jsxs(Z,{variant:"destructive",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx(Q,{children:f})]}),v&&e.jsxs(Z,{className:"border-green-200 bg-green-50 text-green-800",children:[e.jsx(Rt,{className:"h-4 w-4 text-green-600"}),e.jsx(Q,{className:"text-green-800",children:"Settings saved successfully!"})]}),a.sections.sort((b,d)=>b.order-d.order).map(b=>e.jsx(fr,{section:b,children:b.fields.sort((d,D)=>d.order-D.order).map((d,D)=>{const _=ie(d);return vs&&b.id==="sms_gateway_setup"&&d.key==="gateway_help"?e.jsxs(H.Fragment,{children:[_,e.jsx(kr,{gatewayName:i.gateway_name,formData:i,onFieldChange:y})]},d.key):_})},b.id)),e.jsxs("div",{className:"flex justify-end space-x-2 pt-6",children:[e.jsx(F,{type:"button",variant:"outline",onClick:Me,disabled:m||!g(),children:"Reset"}),e.jsx(F,{type:"submit",disabled:m||!g(),children:m?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]})}function zr(a){const[s,t]=n.useState(null),[r,l]=n.useState(!1),[i,c]=n.useState(null);return n.useEffect(()=>{(async()=>{if(!a){t(null);return}try{l(!0),c(null);const o=window.WP_SMS_DATA;if(!o)throw new Error("WP_SMS_DATA not available");const f=await fetch(`${o.restUrl}settings/schema/group/${a}`,{headers:{"X-WP-Nonce":o.nonce,"Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const x=await f.json();if(!x.success)throw new Error(x.message||"Failed to fetch group schema");t(x.data)}catch(o){c(o instanceof Error?o.message:"An error occurred"),console.error("Failed to fetch group schema:",o)}finally{l(!1)}})()},[a]),{data:s,loading:r,error:i}}function Lr(a){const[s,t]=n.useState(null),[r,l]=n.useState(!1),[i,c]=n.useState(null);return n.useEffect(()=>{(async()=>{if(!a){t(null);return}try{l(!0),c(null);const o=window.WP_SMS_DATA;if(!o)throw new Error("WP_SMS_DATA not available");const f=await fetch(`${o.restUrl}settings/values/group/${a}`,{headers:{"X-WP-Nonce":o.nonce,"Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const x=await f.json();if(!x.success)throw new Error(x.message||"Failed to fetch group values");t(x.data)}catch(o){c(o instanceof Error?o.message:"An error occurred"),console.error("Failed to fetch group values:",o)}finally{l(!1)}})()},[a]),{data:s,loading:r,error:i}}function Br(){const a=()=>new URLSearchParams(window.location.search).get("group")||"general",[s,t]=n.useState(a),{data:r,loading:l,error:i}=zr(s),{data:c,loading:m,error:o}=Lr(s),f=j=>{t(j);const v=new URL(window.location.href);v.searchParams.set("group",j),window.history.pushState({},"",v.toString())};n.useEffect(()=>{const j=()=>{const v=a();t(v)};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[]);const x=l||m,w=i||o;return e.jsx(es,{children:e.jsxs("div",{className:"flex w-full min-h-[600px]",children:[e.jsx(sr,{onGroupSelect:f,selectedGroup:s}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your SMS plugin configuration and preferences."})]}),e.jsx($r,{schema:r,savedValues:c,loading:x,error:w})]})})]})})}const na=document.getElementById("wp-sms-settings-root");na?kt.createRoot(na).render(e.jsx(Br,{})):(console.error("WP SMS Settings: Missing #wp-sms-settings-root element in DOM."),console.log("WP SMS Settings: Available elements with similar IDs:",Array.from(document.querySelectorAll('[id*="wp-sms"]')).map(a=>a.id)));
